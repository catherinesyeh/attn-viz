{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/AttnMap/AttnMap.vue?0835","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/components/Projection/MatrixView/MatrixView.vue?20b3","webpack:///./src/components/UserPanel/UserPanel.vue?3926","webpack:///./src/components/App.vue?f47a","webpack:///./src/components/Projection/Projection.vue?3307","webpack:///./src/components/App.vue?6c41","webpack:///./src/services/dataService.ts","webpack:///./src/store/index.ts","webpack:///./src/components/UserPanel/UserPanel.vue?9870","webpack:///./src/components/UserPanel/UserPanel.vue?233f","webpack:///./src/components/UserPanel/UserPanel.vue","webpack:///./src/components/Projection/Projection.vue?7e9e","webpack:///./src/components/Projection/MatrixView/MatrixView.vue?75e6","webpack:///./src/utils/dataTransform.ts","webpack:///./src/components/Projection/MatrixView/MatrixView.vue?9ae1","webpack:///./src/components/Projection/MatrixView/MatrixView.vue","webpack:///./src/components/Projection/Legend/Legend.vue?0f08","webpack:///./src/components/Projection/Legend/Legend.vue?b277","webpack:///./src/components/Projection/Legend/Legend.vue","webpack:///./src/components/Projection/Projection.vue?b33a","webpack:///./src/components/Projection/Projection.vue","webpack:///./src/components/AttnMap/AttnMap.vue?d28f","webpack:///./src/components/AttnMap/AttnMap.vue?be9f","webpack:///./src/components/AttnMap/AttnMap.vue","webpack:///./src/components/App.vue?9b64","webpack:///./src/components/App.vue","webpack:///./src/main.ts","webpack:///./src/components/Projection/Legend/Legend.vue?19f0"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","map","webpackContext","req","id","webpackContextResolve","e","Error","code","keys","resolve","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","for","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","render","_ctx","_cache","$props","$setup","$data","$options","_component_a_select_option","_component_a_select","_component_a_button","_component_font_awesome_icon","_component_AttnMap","_component_Projection","ref","layernum","$event","style","layerNum","onChange","handleChange","default","_","headnum","headNum","type","onClick","zoomToPlot","onClickReset","disabled","resetToMatrix","modelType","options","modelOptions","projectionMethod","projectionMethods","colorBy","colorByOptions","icon","toggleTheme","console","log","dataServerUrl","field","Promise","reject","url","a","then","response","catch","errResponse","post","payload","async","getMatrixData","model","getTokenData","getAttentionByToken","token","state","matrixData","tokenData","layer","head","doneLoading","renderState","attentionLoading","attentionByToken","attns","highlightedTokenIndices","view","dimension","userTheme","showAll","showAttention","sizeByNorm","getters","mutations","dim","theme","actions","dispatch","commit","freeze","tokens","pt","strict","useStore","components","__exports__","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_component_a_input_search","_component_a_checkbox","_component_a_radio_button","_component_a_radio_group","_component_ArrowUpOutlined","_component_ArrowLeftOutlined","_component_ArrowRightOutlined","_component_ArrowDownOutlined","_component_Legend","_component_MatrixView","searchToken","placeholder","onSearch","spellcheck","clearSearch","checked","toggleCheckbox","toggleCheckboxAttention","toggleCheckboxNorm","logViewport","size","moveToPlot","computeMatrixProjectionPoint","matrixCellWidth","matrixCellHeight","matrixCellMargin","results","values","td","types","longestString","arr","reduce","max","maxStringLength","queryColor","domain","keyColor","getColor","colorstr","position","color","rgb","g","b","colorsByPosition","getLengthColor","colorsByLength","discreteColors","numDiscrete","getDiscreteColor","pos_int","colorsByDiscretePosition","punctColors","getPunctColor","punctuationless","replace","colorsByPunctuation","pos_msgs","cat_msgs","length_msgs","xs","ys","md","xoffset","yoffset","computeCoordinate","getX","x","tsne_x","umap_x","pca_x","tsne_x_3d","umap_x_3d","pca_x_3d","getY","tsne_y","umap_y","pca_y","tsne_y_3d","umap_y_3d","pca_y_3d","getZ","tsne_z_3d","umap_z_3d","pca_z_3d","xScale","range","yScale","toFixed","zScale","pointsCoordinates","norm","colorsByNorm","index","tokenType","norm_msgs","Math","round","norms","norm_range","min_norm","max_norm","range_norm","norms_scaled","scaled","colorsByType","points","coordinate","tsne","umap","pca","tsne_3d","umap_3d","pca_3d","categorical","punctuation","msg","normScaled","computeMatrixProjectionLabel","title","computeMatrixProjection","pts","canvasWidth","canvasHeight","timeout","zoomThreshold","nullInitialView","target","zoom","minZoom","maxZoom","transitionDuration","nullInitialViewZoom","initialState","initialStateZoom","defaultOpacity","lightOpacity","props","context","store","viewState","curLayer","curHead","clickedPoint","activePoints","cursorX","cursorY","transitionInProgress","shallowData","headings","y","deckgl","getPointCoordinate","tree","sizeMeasurer","label","fontSize","threshold","width","pow","height","toLineLayer","clickedIndex","clickedType","sourcePosition","searchIndex","minIndex","offset","pickable","widthMaxPixels","widthScale","getSourcePosition","getTargetPosition","arrayIndex","opacity","updateTriggers","toPointOutlineLayer","radiusMaxPixels","stroked","getPosition","getRadius","getFillColor","getLineColor","getLineWidth","lineWidthMaxPixels","toPointLayer","defaultSize","highlightedSize","includes","activeColor","unactiveColor","defaultColor","highlightColorQuery","highlightColorQueryDark","highlightColorKey","highlightColorKeyDark","info","event","pt_info","start_index","same_indices","Array","from","opposite_indices","tokenIndices","toLabelOutlineLayer","visiblePoints","coord","whiteOffset","getText","getSize","getAngle","getTextAnchor","getAlignmentBaseline","toPointLabelLayer","toPlotHeadLayer","sizeMaxPixels","sizeUnits","toOverlayLayer","strokable","filled","extruded","getPolygon","getElevation","obj","makeTree","labelSize","new_coord","minX","minY","maxX","maxY","overlap","collides","insert","toLayers","pointsPerHead","headIndex","findIndex","startInd","endInd","layer_points","layer_headings","clear","v","layers","attn_points","filter","initMatrices","canvas","controller","views","orbitAxis","flipY","initialViewState","getTooltip","getMsg","html","background","onViewStateChange","param","interactionState","inTransition","clearTimeout","setTimeout","handleRequest","onwheel","preventDefault","offsetX","offsetY","old_zoom","switchThreshold","closest","pickObject","radius","layerIds","unproject3D","reset","clicked","setProps","resetZoom","curTarget","center","getViewports","computedProjection","projData","str","toLowerCase","idx","undefined","printViewport","error","x_center","y_center","curZoom","ind","expose","pos","cat","pun","smaller","lowLabel","highLabel","methods","MatrixView","Legend","ArrowUpOutlined","ArrowDownOutlined","ArrowLeftOutlined","ArrowRightOutlined","matrixView","set","num_results","direction","layerHead","showAttn","resetAttn","clearAttn","attnMsg","hideFirst","hideTokens","hideLast","TEXT_SIZE","BOXWIDTH","BOXHEIGHT","MATRIX_WIDTH","TEXT_TOP","attn_vals","cur_attn","hidden","left","right","hideKey","row","rem_attn","cell","min","bertviz","token_type","token_pos","token_text","sentence","split","transpose","params","attention","attn","left_text","right_text","default_filter","root_div_id","heads","include_layers","config","initialize","rootDivId","nHeads","nLayers","headVis","initialTextLength","layer_seq","fill","forEach","renderVis","attnData","leftText","rightText","document","getElementById","innerHTML","layerAttention","svg","append","attr","defs","gradient","renderText","side","selected","querySelectorAll","classList","add","renderAttention","text","isLeft","leftPos","textContainer","topLabels","classed","selectAll","enter","this","parentNode","getAttribute","boxOffsets","activeHeads","tokenContainer","textEl","on","select","nodes","indexOf","new_attn","hid_index","sent_length","row_index","remove","leftTokenIndex","rightTokenIndex","updateAttention","numHeadsAbove","acc","val","cur","mat","col","tokenContainers","selectedToken","selectChild","UserPanel","Projection","AttnMap","projection","storeLayer","storeHead","initUserTheme","getTheme","getMediaPreference","setTheme","activeTheme","localStorage","getItem","setItem","documentElement","className","hasDarkPreference","matchMedia","matches","computed","App","use","component","mount"],"mappings":"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","file":"js/app.5a62ad8d.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([4,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./AttnMap.vue?vue&type=style&index=0&id=5b9e856c&lang=scss\"","var map = {\n\t\"./af\": \"2bfb\",\n\t\"./af.js\": \"2bfb\",\n\t\"./ar\": \"8e73\",\n\t\"./ar-dz\": \"a356\",\n\t\"./ar-dz.js\": \"a356\",\n\t\"./ar-kw\": \"423e\",\n\t\"./ar-kw.js\": \"423e\",\n\t\"./ar-ly\": \"1cfd\",\n\t\"./ar-ly.js\": \"1cfd\",\n\t\"./ar-ma\": \"0a84\",\n\t\"./ar-ma.js\": \"0a84\",\n\t\"./ar-sa\": \"8230\",\n\t\"./ar-sa.js\": \"8230\",\n\t\"./ar-tn\": \"6d83\",\n\t\"./ar-tn.js\": \"6d83\",\n\t\"./ar.js\": \"8e73\",\n\t\"./az\": \"485c\",\n\t\"./az.js\": \"485c\",\n\t\"./be\": \"1fc1\",\n\t\"./be.js\": \"1fc1\",\n\t\"./bg\": \"84aa\",\n\t\"./bg.js\": \"84aa\",\n\t\"./bm\": \"a7fa\",\n\t\"./bm.js\": \"a7fa\",\n\t\"./bn\": \"9043\",\n\t\"./bn-bd\": \"9686\",\n\t\"./bn-bd.js\": \"9686\",\n\t\"./bn.js\": \"9043\",\n\t\"./bo\": \"d26a\",\n\t\"./bo.js\": \"d26a\",\n\t\"./br\": \"6887\",\n\t\"./br.js\": \"6887\",\n\t\"./bs\": \"2554\",\n\t\"./bs.js\": \"2554\",\n\t\"./ca\": \"d716\",\n\t\"./ca.js\": \"d716\",\n\t\"./cs\": \"3c0d\",\n\t\"./cs.js\": \"3c0d\",\n\t\"./cv\": \"03ec\",\n\t\"./cv.js\": \"03ec\",\n\t\"./cy\": \"9797\",\n\t\"./cy.js\": \"9797\",\n\t\"./da\": \"0f14\",\n\t\"./da.js\": \"0f14\",\n\t\"./de\": \"b469\",\n\t\"./de-at\": \"b3eb\",\n\t\"./de-at.js\": \"b3eb\",\n\t\"./de-ch\": \"bb71\",\n\t\"./de-ch.js\": \"bb71\",\n\t\"./de.js\": \"b469\",\n\t\"./dv\": \"598a\",\n\t\"./dv.js\": \"598a\",\n\t\"./el\": \"8d47\",\n\t\"./el.js\": \"8d47\",\n\t\"./en-au\": \"0e6b\",\n\t\"./en-au.js\": \"0e6b\",\n\t\"./en-ca\": \"3886\",\n\t\"./en-ca.js\": \"3886\",\n\t\"./en-gb\": \"39a6\",\n\t\"./en-gb.js\": \"39a6\",\n\t\"./en-ie\": \"e1d3\",\n\t\"./en-ie.js\": \"e1d3\",\n\t\"./en-il\": \"7333\",\n\t\"./en-il.js\": \"7333\",\n\t\"./en-in\": \"ec2e\",\n\t\"./en-in.js\": \"ec2e\",\n\t\"./en-nz\": \"6f50\",\n\t\"./en-nz.js\": \"6f50\",\n\t\"./en-sg\": \"b7e9\",\n\t\"./en-sg.js\": \"b7e9\",\n\t\"./eo\": \"65db\",\n\t\"./eo.js\": \"65db\",\n\t\"./es\": \"898b8\",\n\t\"./es-do\": \"0a3c\",\n\t\"./es-do.js\": \"0a3c\",\n\t\"./es-mx\": \"b5b7\",\n\t\"./es-mx.js\": \"b5b7\",\n\t\"./es-us\": \"55c9\",\n\t\"./es-us.js\": \"55c9\",\n\t\"./es.js\": \"898b8\",\n\t\"./et\": \"ec18\",\n\t\"./et.js\": \"ec18\",\n\t\"./eu\": \"0ff2\",\n\t\"./eu.js\": \"0ff2\",\n\t\"./fa\": \"8df4\",\n\t\"./fa.js\": \"8df4\",\n\t\"./fi\": \"81e9\",\n\t\"./fi.js\": \"81e9\",\n\t\"./fil\": \"d69a\",\n\t\"./fil.js\": \"d69a\",\n\t\"./fo\": \"0721\",\n\t\"./fo.js\": \"0721\",\n\t\"./fr\": \"9f26\",\n\t\"./fr-ca\": \"d9f8\",\n\t\"./fr-ca.js\": \"d9f8\",\n\t\"./fr-ch\": \"0e49\",\n\t\"./fr-ch.js\": \"0e49\",\n\t\"./fr.js\": \"9f26\",\n\t\"./fy\": \"7118\",\n\t\"./fy.js\": \"7118\",\n\t\"./ga\": \"5120\",\n\t\"./ga.js\": \"5120\",\n\t\"./gd\": \"f6b4\",\n\t\"./gd.js\": \"f6b4\",\n\t\"./gl\": \"8840\",\n\t\"./gl.js\": \"8840\",\n\t\"./gom-deva\": \"aaf2\",\n\t\"./gom-deva.js\": \"aaf2\",\n\t\"./gom-latn\": \"0caa\",\n\t\"./gom-latn.js\": \"0caa\",\n\t\"./gu\": \"e0c5\",\n\t\"./gu.js\": \"e0c5\",\n\t\"./he\": \"c7aa\",\n\t\"./he.js\": \"c7aa\",\n\t\"./hi\": \"dc4d\",\n\t\"./hi.js\": \"dc4d\",\n\t\"./hr\": \"4ba9\",\n\t\"./hr.js\": \"4ba9\",\n\t\"./hu\": \"5b14\",\n\t\"./hu.js\": \"5b14\",\n\t\"./hy-am\": \"d6b6\",\n\t\"./hy-am.js\": \"d6b6\",\n\t\"./id\": \"5038\",\n\t\"./id.js\": \"5038\",\n\t\"./is\": \"0558\",\n\t\"./is.js\": \"0558\",\n\t\"./it\": \"6e98\",\n\t\"./it-ch\": \"6f12\",\n\t\"./it-ch.js\": \"6f12\",\n\t\"./it.js\": \"6e98\",\n\t\"./ja\": \"079e\",\n\t\"./ja.js\": \"079e\",\n\t\"./jv\": \"b540\",\n\t\"./jv.js\": \"b540\",\n\t\"./ka\": \"201b\",\n\t\"./ka.js\": \"201b\",\n\t\"./kk\": \"6d79\",\n\t\"./kk.js\": \"6d79\",\n\t\"./km\": \"e81d\",\n\t\"./km.js\": \"e81d\",\n\t\"./kn\": \"3e92\",\n\t\"./kn.js\": \"3e92\",\n\t\"./ko\": \"22f8\",\n\t\"./ko.js\": \"22f8\",\n\t\"./ku\": \"2421\",\n\t\"./ku.js\": \"2421\",\n\t\"./ky\": \"9609\",\n\t\"./ky.js\": \"9609\",\n\t\"./lb\": \"440c\",\n\t\"./lb.js\": \"440c\",\n\t\"./lo\": \"b29d\",\n\t\"./lo.js\": \"b29d\",\n\t\"./lt\": \"26f9\",\n\t\"./lt.js\": \"26f9\",\n\t\"./lv\": \"b97c\",\n\t\"./lv.js\": \"b97c\",\n\t\"./me\": \"293c\",\n\t\"./me.js\": \"293c\",\n\t\"./mi\": \"688b\",\n\t\"./mi.js\": \"688b\",\n\t\"./mk\": \"6909\",\n\t\"./mk.js\": \"6909\",\n\t\"./ml\": \"02fb\",\n\t\"./ml.js\": \"02fb\",\n\t\"./mn\": \"958b\",\n\t\"./mn.js\": \"958b\",\n\t\"./mr\": \"39bd\",\n\t\"./mr.js\": \"39bd\",\n\t\"./ms\": \"ebe4\",\n\t\"./ms-my\": \"6403\",\n\t\"./ms-my.js\": \"6403\",\n\t\"./ms.js\": \"ebe4\",\n\t\"./mt\": \"1b45\",\n\t\"./mt.js\": \"1b45\",\n\t\"./my\": \"8689\",\n\t\"./my.js\": \"8689\",\n\t\"./nb\": \"6ce3\",\n\t\"./nb.js\": \"6ce3\",\n\t\"./ne\": \"3a39\",\n\t\"./ne.js\": \"3a39\",\n\t\"./nl\": \"facd\",\n\t\"./nl-be\": \"db29\",\n\t\"./nl-be.js\": \"db29\",\n\t\"./nl.js\": \"facd\",\n\t\"./nn\": \"b84c\",\n\t\"./nn.js\": \"b84c\",\n\t\"./oc-lnc\": \"167b\",\n\t\"./oc-lnc.js\": \"167b\",\n\t\"./pa-in\": \"f3ff\",\n\t\"./pa-in.js\": \"f3ff\",\n\t\"./pl\": \"8d57\",\n\t\"./pl.js\": \"8d57\",\n\t\"./pt\": \"f260\",\n\t\"./pt-br\": \"d2d4\",\n\t\"./pt-br.js\": \"d2d4\",\n\t\"./pt.js\": \"f260\",\n\t\"./ro\": \"972c\",\n\t\"./ro.js\": \"972c\",\n\t\"./ru\": \"957c\",\n\t\"./ru.js\": \"957c\",\n\t\"./sd\": \"6784\",\n\t\"./sd.js\": \"6784\",\n\t\"./se\": \"ffff\",\n\t\"./se.js\": \"ffff\",\n\t\"./si\": \"eda5\",\n\t\"./si.js\": \"eda5\",\n\t\"./sk\": \"7be6\",\n\t\"./sk.js\": \"7be6\",\n\t\"./sl\": \"8155\",\n\t\"./sl.js\": \"8155\",\n\t\"./sq\": \"c8f3\",\n\t\"./sq.js\": \"c8f3\",\n\t\"./sr\": \"cf1e\",\n\t\"./sr-cyrl\": \"13e9\",\n\t\"./sr-cyrl.js\": \"13e9\",\n\t\"./sr.js\": \"cf1e\",\n\t\"./ss\": \"52bd\",\n\t\"./ss.js\": \"52bd\",\n\t\"./sv\": \"5fbd\",\n\t\"./sv.js\": \"5fbd\",\n\t\"./sw\": \"74dc\",\n\t\"./sw.js\": \"74dc\",\n\t\"./ta\": \"3de5\",\n\t\"./ta.js\": \"3de5\",\n\t\"./te\": \"5cbb\",\n\t\"./te.js\": \"5cbb\",\n\t\"./tet\": \"576c\",\n\t\"./tet.js\": \"576c\",\n\t\"./tg\": \"3b1b\",\n\t\"./tg.js\": \"3b1b\",\n\t\"./th\": \"10e8\",\n\t\"./th.js\": \"10e8\",\n\t\"./tk\": \"5aff\",\n\t\"./tk.js\": \"5aff\",\n\t\"./tl-ph\": \"0f38\",\n\t\"./tl-ph.js\": \"0f38\",\n\t\"./tlh\": \"cf75\",\n\t\"./tlh.js\": \"cf75\",\n\t\"./tr\": \"0e81\",\n\t\"./tr.js\": \"0e81\",\n\t\"./tzl\": \"cf51\",\n\t\"./tzl.js\": \"cf51\",\n\t\"./tzm\": \"c109\",\n\t\"./tzm-latn\": \"b53d\",\n\t\"./tzm-latn.js\": \"b53d\",\n\t\"./tzm.js\": \"c109\",\n\t\"./ug-cn\": \"6117\",\n\t\"./ug-cn.js\": \"6117\",\n\t\"./uk\": \"ada2\",\n\t\"./uk.js\": \"ada2\",\n\t\"./ur\": \"5294\",\n\t\"./ur.js\": \"5294\",\n\t\"./uz\": \"2e8c\",\n\t\"./uz-latn\": \"010e\",\n\t\"./uz-latn.js\": \"010e\",\n\t\"./uz.js\": \"2e8c\",\n\t\"./vi\": \"2921\",\n\t\"./vi.js\": \"2921\",\n\t\"./x-pseudo\": \"fd7e\",\n\t\"./x-pseudo.js\": \"fd7e\",\n\t\"./yo\": \"7f33\",\n\t\"./yo.js\": \"7f33\",\n\t\"./zh-cn\": \"5c3a\",\n\t\"./zh-cn.js\": \"5c3a\",\n\t\"./zh-hk\": \"49ab\",\n\t\"./zh-hk.js\": \"49ab\",\n\t\"./zh-mo\": \"3a6c\",\n\t\"./zh-mo.js\": \"3a6c\",\n\t\"./zh-tw\": \"90ea\",\n\t\"./zh-tw.js\": \"90ea\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"4678\";","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./MatrixView.vue?vue&type=style&index=0&id=22f1b35c&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserPanel.vue?vue&type=style&index=0&id=1f24fa3a&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=5fe3875a&rel=stylesheet&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Projection.vue?vue&type=style&index=0&id=11ad2990&lang=scss\"","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, normalizeClass as _normalizeClass, Transition as _Transition } from \"vue\"\n\nconst _hoisted_1 = { class: \"navbar navbar-light bg-light\" }\nconst _hoisted_2 = { class: \"container-fluid\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"navbar-brand mb-0 h1\" }, \"Attention Viz\", -1)\nconst _hoisted_4 = { class: \"dropdown\" }\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"layernum\" }, \"Zoom to Layer:\", -1)\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"headnum\" }, \"Head:\", -1)\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" go \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" reset zoom \")\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" view all \")\nconst _hoisted_10 = { class: \"dropdown\" }\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"model\" }, \"Model:\", -1)\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"graph-type\" }, \"Graph Type:\", -1)\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"color-by\" }, \"Color By:\", -1)\nconst _hoisted_14 = { class: \"main\" }\nconst _hoisted_15 = { class: \"row\" }\nconst _hoisted_16 = { class: \"col-2\" }\nconst _hoisted_17 = { class: \"col-10\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_a_select_option = _resolveComponent(\"a-select-option\")!\n  const _component_a_select = _resolveComponent(\"a-select\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\")!\n  const _component_AttnMap = _resolveComponent(\"AttnMap\")!\n  const _component_Projection = _resolveComponent(\"Projection\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"nav\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _hoisted_3,\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createVNode(_component_a_select, {\n            ref: \"layer-select\",\n            value: _ctx.layernum,\n            \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.layernum) = $event)),\n            style: {\"width\":\"60px\"},\n            layerNum: _ctx.layernum,\n            onChange: _cache[1] || (_cache[1] = ($event: any) => (_ctx.handleChange('layer', _ctx.layernum)))\n          }, {\n            default: _withCtx(() => [\n              (_openBlock(), _createElementBlock(_Fragment, null, _renderList(12, (i) => {\n                return _createVNode(_component_a_select_option, {\n                  value: i - 1\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(i - 1), 1)\n                  ]),\n                  _: 2\n                }, 1032, [\"value\"])\n              }), 64))\n            ]),\n            _: 1\n          }, 8, [\"value\", \"layerNum\"]),\n          _hoisted_6,\n          _createVNode(_component_a_select, {\n            ref: \"head-select\",\n            value: _ctx.headnum,\n            \"onUpdate:value\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.headnum) = $event)),\n            style: {\"width\":\"60px\"},\n            headNum: _ctx.headnum,\n            onChange: _cache[3] || (_cache[3] = ($event: any) => (_ctx.handleChange('head', _ctx.headnum)))\n          }, {\n            default: _withCtx(() => [\n              (_openBlock(), _createElementBlock(_Fragment, null, _renderList(12, (i) => {\n                return _createVNode(_component_a_select_option, {\n                  value: i - 1\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(i - 1), 1)\n                  ]),\n                  _: 2\n                }, 1032, [\"value\"])\n              }), 64))\n            ]),\n            _: 1\n          }, 8, [\"value\", \"headNum\"]),\n          _createVNode(_component_a_button, {\n            type: \"primary\",\n            id: \"zoom-go\",\n            onClick: _ctx.zoomToPlot\n          }, {\n            default: _withCtx(() => [\n              _hoisted_7\n            ]),\n            _: 1\n          }, 8, [\"onClick\"]),\n          _createVNode(_component_a_button, {\n            type: \"text\",\n            class: \"matrix-reset\",\n            onClick: _ctx.onClickReset\n          }, {\n            default: _withCtx(() => [\n              _hoisted_8\n            ]),\n            _: 1\n          }, 8, [\"onClick\"]),\n          _createVNode(_component_a_button, {\n            type: \"text\",\n            class: _normalizeClass([\"matrix-reset\", {\n          disabled: _ctx.mode == 'matrix'\n        }]),\n            onClick: _ctx.resetToMatrix\n          }, {\n            default: _withCtx(() => [\n              _hoisted_9\n            ]),\n            _: 1\n          }, 8, [\"onClick\", \"class\"])\n        ]),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _hoisted_11,\n          _createVNode(_component_a_select, {\n            value: _ctx.modelType,\n            \"onUpdate:value\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.modelType) = $event)),\n            style: {\"width\":\"80px\"},\n            options: _ctx.modelOptions\n          }, null, 8, [\"value\", \"options\"]),\n          _hoisted_12,\n          _createVNode(_component_a_select, {\n            value: _ctx.projectionMethod,\n            \"onUpdate:value\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.projectionMethod) = $event)),\n            style: {\"width\":\"80px\"},\n            options: _ctx.projectionMethods\n          }, null, 8, [\"value\", \"options\"]),\n          _hoisted_13,\n          _createVNode(_component_a_select, {\n            value: _ctx.colorBy,\n            \"onUpdate:value\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.colorBy) = $event)),\n            style: {\"width\":\"120px\"},\n            options: _ctx.colorByOptions\n          }, null, 8, [\"value\", \"options\"]),\n          _createVNode(_Transition, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_font_awesome_icon, {\n                icon: _ctx.icon,\n                onClick: _ctx.toggleTheme\n              }, null, 8, [\"icon\", \"onClick\"])\n            ]),\n            _: 1\n          })\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_14, [\n      _createElementVNode(\"div\", _hoisted_15, [\n        _createElementVNode(\"div\", _hoisted_16, [\n          _createVNode(_component_AttnMap)\n        ]),\n        _createElementVNode(\"div\", _hoisted_17, [\n          _createVNode(_component_Projection, { ref: \"projection\" }, null, 512)\n        ])\n      ])\n    ])\n  ], 64))\n}","import Vue from \"vue\";\nimport axios from \"axios\";\nimport { Typing } from \"@/utils/typing\";\n// import * as types from \"@/utils/types\";\n\n// Assume the port of the data Server is 5000, for test only\n// const dataServerUrl = \"http://vastback.s44.hkustvis.org\";\n\nconsole.log(process.env);\nconst dataServerUrl = process.env.BASE_URL || \"http://localhost:8500\";\nconsole.log(dataServerUrl);\n\n// const $http = (Vue as any).http;\n\nfunction get(field: string): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const url = `${dataServerUrl}/` + field;\n    axios\n      .get(url)\n      .then((response: any) => {\n        console.log(\"promose resolve: \" + field, response);\n        resolve(response.data);\n      })\n      .catch((errResponse: any) => {\n        console.log(\"promose reject: \" + field);\n        reject(errResponse);\n      });\n  });\n}\n\nfunction post(field: string, payload: any): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const url = `${dataServerUrl}/` + field;\n    axios\n      .post(url, payload)\n      .then((response: any) => {\n        console.log(\"promose resolve: \" + field, response);\n        resolve(response.data);\n      })\n      .catch((errResponse: any) => {\n        console.log(\"promose reject: \" + field);\n        reject(errResponse);\n      });\n  });\n}\n\n// export async function getRawData() {\n//     return get(`get_raw_data`);\n// }\n\nexport async function getMatrixData(model: string) {\n  // return post(`getMatrixData`, {\"model\": model});\n  return get(\"getMatrixData/\" + model)\n}\n\n// export async function getAttentionData() {\n//   return get(`getAttentionData`);\n// }\n\nexport async function getTokenData(model: string) {\n  return get(\"getTokenData/\" + model);\n}\n\nexport async function getAttentionByToken(token: Typing.Point, model: string) : Promise<Typing.AttnByToken> {\n  return post(\"getAttentionByToken/\" + model, token); \n}\n// export async function getPitfallById(id: string) {\n//   return get(`getPitfallById/${id}`);\n// }\n\n// export async function saveCurrentVideo(videoinfo: any) {\n//   return post(\"saveCurrentVideo\", videoinfo)\n// }","import { InjectionKey } from 'vue'\nimport { createStore, useStore as baseUseStore, Store } from 'vuex'\nimport * as dataService from \"@/services/dataService\";\nimport {computeMatrixProjection} from \"@/utils/dataTransform\";\n\nimport { TypeOfList } from \"underscore\";\n\n// init default \nimport { Typing } from \"@/utils/typing\";\nimport { ConsoleSqlOutlined } from '@ant-design/icons-vue';\n\n// Vuex docs: https://vuex.vuejs.org/\n\nexport interface State {\n  matrixData: Typing.MatrixData[];\n  // attentionData: Typing.AttentionData[];\n  tokenData: Typing.TokenData[];\n\n  // current layer and head\n  layer: number | string;\n  head: number | string;\n\n  renderState: boolean; // true when the canvas is being rendered; false upon finished\n  attentionLoading: boolean; \n  doneLoading: boolean;\n  userTheme: string; // dark or light\n  view: string; // none, search, or attention\n  mode: string; // single or matrix\n  dimension: string; // 2D or 3D\n\n  // attention\n  attentionByToken: Typing.AttnByToken;\n  highlightedTokenIndices: number[]; \n  // attentionByTokenLock: boolean; \n\n  modelType: string; // bert or gpt\n  projectionMethod: keyof Typing.PointCoordinate; // tsne or umap\n  colorBy: keyof Typing.PointColor; // different colorings (e.g., type, position, norm, etc.)\n\n  // adjust plot in single view\n  showAll: boolean; // labels\n  showAttention: boolean; // attention lines\n  sizeByNorm: boolean; // dot size\n  // disableLabel: boolean;\n}\n\n// define injection key\nexport const key: InjectionKey<Store<State>> = Symbol()\n\nexport const store = createStore<State>({\n  state: {\n    matrixData: [],\n    // attentionData: [],\n    tokenData: [],\n    layer: \"\",\n    head: \"\",\n    doneLoading: false,\n    renderState: true,\n    attentionLoading: false,\n    attentionByToken: {layer: 0, head: 0, attns: [], token: {} as Typing.TokenData},\n    // attentionByTokenLock: false,\n    modelType: 'gpt',\n    projectionMethod: 'tsne',\n    colorBy: 'type',\n    highlightedTokenIndices: [],\n    mode: 'matrix',\n    view: 'none',\n    dimension: '2D',\n    userTheme: 'light-theme',\n    showAll: false,\n    showAttention: false,\n    sizeByNorm: false,\n    // disableLabel: false\n  },\n  modules: { // each module can contain its own state, mutations, actions, etc.\n  },\n  getters: {\n  },\n  mutations: {\n    setMatrixData(state, matrixData) {\n      state.matrixData = matrixData\n    },\n    // setAttentionData(state, attentionData) {\n    //   state.attentionData = attentionData\n    // },\n    setTokenData(state, tokenData) {\n      state.tokenData = tokenData\n    },\n    setLayer(state, layer) {\n      state.layer = layer;\n    },\n    setHead(state, head) {\n      state.head = head;\n    },\n    updateDoneLoading(state, doneLoading) {\n      state.doneLoading = doneLoading;\n      console.log('state: doneLoading', doneLoading);\n    },\n    updateAttentionLoading(state, attentionLoading) {\n      state.attentionLoading = attentionLoading;\n      console.log('state: attentionLoading', attentionLoading);\n    },\n    updateRenderState(state, renderState) {\n      state.renderState = renderState;\n      console.log('state: renderState', renderState);\n    }, \n    setAttentionByToken(state, attentionByToken) {\n      state.attentionByToken = attentionByToken\n    },\n    // setAttentionByTokenLock(state, attentionByTokenLock) {\n    //   state.attentionByTokenLock = attentionByTokenLock;\n    // },\n    setModelType(state, modelType) {\n      state.modelType = modelType\n      console.log('setModelType', modelType);\n    },\n    setProjectionMethod(state, projectionMethod) {\n      state.projectionMethod = projectionMethod\n      console.log('setProjectionMethod', projectionMethod);\n    },\n    setColorBy(state, colorBy) {\n      state.colorBy = colorBy;\n      console.log('setColorBy', colorBy);\n    },\n    setHighlightedTokenIndices(state, highlightedTokenIndices) {\n      state.highlightedTokenIndices = highlightedTokenIndices;\n    },\n    setView(state, view) {\n      state.view = view;\n      console.log('setView', view);\n    },\n    setMode(state, mode) {\n      state.mode = mode;\n      console.log('setMode', mode);\n    },\n    setDimension(state, dim) {\n      state.dimension = dim;\n      console.log('setDimension', dim);\n    },\n    setUserTheme(state, theme) {\n      state.userTheme = theme;\n      console.log('setUserTheme', theme);\n    },\n    setShowAll(state, showAll) {\n      state.showAll = showAll;\n      console.log('setShowAll', showAll);\n    },\n    setShowAttention(state, showAttention) {\n      state.showAttention = showAttention;\n      console.log('setShowAttention', showAttention);\n    },\n    setSizeByNorm(state, sizeByNorm) {\n      state.sizeByNorm = sizeByNorm;\n      console.log('setSizeByNorm', sizeByNorm);\n    },\n    // setDisableLabel(state, disableLabel) {\n    //   state.disableLabel = disableLabel;\n    //   console.log('setDisableLabel', disableLabel);\n    // }\n  },\n  actions: { // actions commit mutations\n    async init({ state, dispatch }) {\n      dispatch('computeData');\n    },\n    async computeData({state, commit}) {\n      commit(\"updateRenderState\", true);\n      // console.log(\"computing data!\");\n      const matrixData = (await dataService.getMatrixData(state.modelType)).data;\n      commit('setMatrixData', Object.freeze(matrixData));\n      // console.log('setMatrixData', Object.freeze(matrixData));\n\n      const tokenData = (await dataService.getTokenData(state.modelType)).tokens;\n      commit('setTokenData', Object.freeze(tokenData));\n      // console.log('setTokenData', Object.freeze(tokenData));\n\n      commit('updateDoneLoading', true);\n    },\n    async switchModel({state, commit, dispatch}, model: string) {\n      commit('setModelType', model);\n      commit('updateDoneLoading', false);\n      dispatch('computeData');\n    },\n    async setClickedPoint({state, commit}, pt: Typing.Point) {\n      // if (state.attentionByTokenLock) {\n      //   console.log('Lock');\n      //   return;\n      // } \n      // commit('setAttentionByTokenLock', true); \n      console.log('setClickedPoint', pt);\n      const attentionByToken = (await dataService.getAttentionByToken(pt, state.modelType));\n      console.log('attentionDataByToken', attentionByToken);\n      commit('setAttentionByToken', attentionByToken);\n      commit('updateAttentionLoading', false);\n      // commit('setAttentionByTokenLock', false)\n    }\n  },\n  strict: process.env.NODE_ENV !== \"production\"\n});\n\n// define your own `useStore` composition function\nexport function useStore() {\n  return baseUseStore(key)\n}","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"viewHead\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \" User Config Panel \"))\n}","\nimport { onMounted, computed, reactive, toRefs, h, watch } from \"vue\";\nimport * as _ from \"underscore\";\nimport { useStore } from \"@/store/index\";\n\nexport default {\n    components: {  },\n    setup() {\n        const store = useStore();\n\n        const state = reactive({\n\n        });\n\n        return {\n            ...toRefs(state),\n        };\n    },\n};\n","import { render } from \"./UserPanel.vue?vue&type=template&id=1f24fa3a&ts=true\"\nimport script from \"./UserPanel.vue?vue&type=script&lang=ts\"\nexport * from \"./UserPanel.vue?vue&type=script&lang=ts\"\n\nimport \"./UserPanel.vue?vue&type=style&index=0&id=1f24fa3a&lang=scss\"\n\nimport exportComponent from \"/Users/catherineyeh/Documents/research/attention viz/attn-viz/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { vShow as _vShow, createElementVNode as _createElementVNode, withDirectives as _withDirectives, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, Transition as _Transition, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"matrix-wrapper\" }\nconst _hoisted_2 = { id: \"label-wrapper\" }\nconst _hoisted_3 = { id: \"loading\" }\nconst _hoisted_4 = { id: \"matrix-labels\" }\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"axis-label\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", { class: \"head-axis\" }, \"head →\"),\n  /*#__PURE__*/_createElementVNode(\"span\", { class: \"layer-axis\" }, \"layer ↓\")\n], -1)\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"label\" }, \"Search\", -1)\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"clear\")\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"label\" }, \"Labels\", -1)\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"show\")\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"label\" }, \"Attention Lines\", -1)\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\"show\")\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"label\" }, \"Dot Size\", -1)\nconst _hoisted_13 = /*#__PURE__*/_createTextVNode(\"scale by norm\")\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"label\" }, \"Developer Tool\", -1)\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\" log viewport \")\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"label\" }, \"Mode\", -1)\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\"2D\")\nconst _hoisted_18 = /*#__PURE__*/_createTextVNode(\"3D\")\nconst _hoisted_19 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"label\" }, \"Controls\", -1)\nconst _hoisted_20 = { id: \"control-buttons\" }\nconst _hoisted_21 = { class: \"arrow-group center\" }\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"gradient-edge\" }, null, -1)\nconst _hoisted_23 = { class: \"gradient-edge right\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_a_input_search = _resolveComponent(\"a-input-search\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_checkbox = _resolveComponent(\"a-checkbox\")!\n  const _component_a_radio_button = _resolveComponent(\"a-radio-button\")!\n  const _component_a_radio_group = _resolveComponent(\"a-radio-group\")!\n  const _component_ArrowUpOutlined = _resolveComponent(\"ArrowUpOutlined\")!\n  const _component_ArrowLeftOutlined = _resolveComponent(\"ArrowLeftOutlined\")!\n  const _component_ArrowRightOutlined = _resolveComponent(\"ArrowRightOutlined\")!\n  const _component_ArrowDownOutlined = _resolveComponent(\"ArrowDownOutlined\")!\n  const _component_Legend = _resolveComponent(\"Legend\")!\n  const _component_MatrixView = _resolveComponent(\"MatrixView\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _withDirectives(_createElementVNode(\"span\", _hoisted_3, \"Loading...\", 512), [\n          [_vShow, _ctx.renderState]\n        ]),\n        _withDirectives(_createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _hoisted_6,\n          _createVNode(_component_a_input_search, {\n            value: _ctx.searchToken,\n            \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.searchToken) = $event)),\n            placeholder: \"Search tokens\",\n            \"enter-button\": \"\",\n            onSearch: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onSearch(_ctx.searchToken))),\n            spellcheck: \"false\"\n          }, null, 8, [\"value\"]),\n          _createVNode(_Transition, null, {\n            default: _withCtx(() => [\n              _withDirectives(_createVNode(_component_a_button, {\n                class: \"clear\",\n                type: \"link\",\n                onClick: _ctx.clearSearch\n              }, {\n                default: _withCtx(() => [\n                  _hoisted_7\n                ]),\n                _: 1\n              }, 8, [\"onClick\"]), [\n                [_vShow, _ctx.searchToken != '']\n              ])\n            ]),\n            _: 1\n          }),\n          _hoisted_8,\n          _createVNode(_component_a_checkbox, {\n            checked: _ctx.showAll,\n            \"onUpdate:checked\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.showAll) = $event)),\n            onClick: _ctx.toggleCheckbox,\n            class: _normalizeClass({ disabled: _ctx.mode == 'matrix' })\n          }, {\n            default: _withCtx(() => [\n              _hoisted_9\n            ]),\n            _: 1\n          }, 8, [\"checked\", \"onClick\", \"class\"]),\n          _hoisted_10,\n          _createVNode(_component_a_checkbox, {\n            checked: _ctx.showAttention,\n            \"onUpdate:checked\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.showAttention) = $event)),\n            onClick: _ctx.toggleCheckboxAttention,\n            class: _normalizeClass({ disabled: _ctx.mode == 'matrix' || _ctx.view != 'attn' })\n          }, {\n            default: _withCtx(() => [\n              _hoisted_11\n            ]),\n            _: 1\n          }, 8, [\"checked\", \"onClick\", \"class\"]),\n          _hoisted_12,\n          _createVNode(_component_a_checkbox, {\n            checked: _ctx.sizeByNorm,\n            \"onUpdate:checked\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.sizeByNorm) = $event)),\n            onClick: _ctx.toggleCheckboxNorm,\n            class: _normalizeClass({ disabled: _ctx.mode == 'matrix' })\n          }, {\n            default: _withCtx(() => [\n              _hoisted_13\n            ]),\n            _: 1\n          }, 8, [\"checked\", \"onClick\", \"class\"]),\n          _hoisted_14,\n          _createVNode(_component_a_button, {\n            type: \"primary\",\n            onClick: _ctx.logViewport\n          }, {\n            default: _withCtx(() => [\n              _hoisted_15\n            ]),\n            _: 1\n          }, 8, [\"onClick\"]),\n          _createElementVNode(\"div\", null, [\n            _hoisted_16,\n            _createVNode(_component_a_radio_group, {\n              value: _ctx.dimension,\n              \"onUpdate:value\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.dimension) = $event))\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_a_radio_button, { value: \"2D\" }, {\n                  default: _withCtx(() => [\n                    _hoisted_17\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_a_radio_button, { value: \"3D\" }, {\n                  default: _withCtx(() => [\n                    _hoisted_18\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"value\"])\n          ]),\n          _createVNode(_Transition, null, {\n            default: _withCtx(() => [\n              _withDirectives(_createElementVNode(\"div\", null, [\n                _hoisted_19,\n                _createElementVNode(\"div\", _hoisted_20, [\n                  _createVNode(_component_a_button, {\n                    class: _normalizeClass([\"center\", { disabled: _ctx.layer < 1 }]),\n                    type: \"default\",\n                    size: \"small\",\n                    onClick: _cache[6] || (_cache[6] = ($event: any) => (_ctx.moveToPlot('up'))),\n                    disabled: _ctx.layer < 1\n                  }, {\n                    icon: _withCtx(() => [\n                      _createVNode(_component_ArrowUpOutlined)\n                    ]),\n                    _: 1\n                  }, 8, [\"class\", \"disabled\"]),\n                  _createElementVNode(\"div\", _hoisted_21, [\n                    _createVNode(_component_a_button, {\n                      type: \"default\",\n                      size: \"small\",\n                      class: _normalizeClass({ disabled: _ctx.head < 1 }),\n                      onClick: _cache[7] || (_cache[7] = ($event: any) => (_ctx.moveToPlot('left'))),\n                      disabled: _ctx.head < 1\n                    }, {\n                      icon: _withCtx(() => [\n                        _createVNode(_component_ArrowLeftOutlined)\n                      ]),\n                      _: 1\n                    }, 8, [\"class\", \"disabled\"]),\n                    _createVNode(_component_a_button, {\n                      type: \"default\",\n                      size: \"small\",\n                      class: _normalizeClass({ disabled: _ctx.head > 10 }),\n                      onClick: _cache[8] || (_cache[8] = ($event: any) => (_ctx.moveToPlot('right'))),\n                      disabled: _ctx.head > 10\n                    }, {\n                      icon: _withCtx(() => [\n                        _createVNode(_component_ArrowRightOutlined)\n                      ]),\n                      _: 1\n                    }, 8, [\"class\", \"disabled\"])\n                  ]),\n                  _createVNode(_component_a_button, {\n                    class: _normalizeClass([\"center\", { disabled: _ctx.layer > 10 }]),\n                    type: \"default\",\n                    size: \"small\",\n                    onClick: _cache[9] || (_cache[9] = ($event: any) => (_ctx.moveToPlot('down'))),\n                    disabled: _ctx.layer > 10\n                  }, {\n                    icon: _withCtx(() => [\n                      _createVNode(_component_ArrowDownOutlined)\n                    ]),\n                    _: 1\n                  }, 8, [\"class\", \"disabled\"])\n                ])\n              ], 512), [\n                [_vShow, _ctx.mode === 'single']\n              ])\n            ]),\n            _: 1\n          })\n        ], 512), [\n          [_vShow, !_ctx.renderState]\n        ])\n      ]),\n      _hoisted_22,\n      _createElementVNode(\"div\", _hoisted_23, [\n        _createVNode(_component_Legend)\n      ]),\n      _withDirectives(_createVNode(_component_MatrixView, { ref: \"matrixView\" }, null, 512), [\n        [_vShow, !_ctx.renderState]\n      ])\n    ])\n  ]))\n}","import { openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-22f1b35c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { id: \"matrix-canvas\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"canvas\", _hoisted_1))\n}","import { Typing } from \"@/utils/typing\";\nimport * as d3 from \"d3\";\nimport * as _ from \"underscore\";\n\nconst computeMatrixProjectionPoint = (matrixData: Typing.MatrixData[], tokenData: Typing.TokenData[], matrixCellWidth = 100, matrixCellHeight = 100, matrixCellMargin = 20) => {\n    var results = [] as Typing.Point[];\n    const values = tokenData.map(td => td.value);\n    const types = tokenData.map(td => td.type);\n\n    const longestString = (arr: string[]) => { \n        // find longest string for later\n        return arr.reduce((max,name) => {\n             return name.length > max.length? name: max\n         }, arr[0])\n     }\n    const maxStringLength = longestString(values).length;\n\n    // compute colors for each token\n    const queryColor = d3.scaleSequential(function (t) {\n        return d3.interpolateYlGn(t * 0.75 + 0.25);\n    }).domain([0, 1]);\n    const keyColor = d3.scaleSequential(function (t) {\n        return d3.interpolatePuRd(t * 0.75 + 0.25);\n    }).domain([0, 1]);\n    const getColor = (td: Typing.TokenData) => {\n        var colorstr = \"rgb()\";\n        if (td.type === \"query\") {\n            colorstr = queryColor(td.position);\n        } else if (td.type === \"key\") {\n            colorstr = keyColor(td.position);\n        }\n        const color = d3.color(colorstr)?.rgb();\n        if (!color) return [0, 0, 0];\n        return [color.r, color.g, color.b];\n    };\n    const colorsByPosition = tokenData.map((td) => getColor(td));\n\n    const getLengthColor = (td: Typing.TokenData) => {\n        var colorstr = \"rgb()\";\n        if (td.type === \"query\") {\n            colorstr = queryColor(td.value.length / maxStringLength);\n        } else if (td.type === \"key\") {\n            colorstr = keyColor(td.value.length / maxStringLength);\n        }\n        const color = d3.color(colorstr)?.rgb();\n        if (!color) return [0, 0, 0];\n        return [color.r, color.g, color.b];\n    };\n    const colorsByLength = tokenData.map((td) => getLengthColor(td));\n\n    // const discreteColors =  [\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\",\"#b2df8a\",\"#33a02c\",\"#a6cee3\",\"#1f78b4\",\"#cab2d6\",\"#6a3d9a\"];\n    // const discreteColors =  [\"#FFB5CF\",\"#E3378F\",\"#f5ca86\",\"#F39226\",\"#addfa2\",\"#5FB96C\",\"#9fd2ea\",\"#2E93D9\",\"#CFB0EF\",\"#7F5BDB\"];\n    const discreteColors =  [\"#F5C0CA\",\"#E3378F\",\"#F0D6A5\",\"#EDB50E\",\"#C4D6B8\",\"#5FB96C\",\"#C8DDED\",\"#528DDB\",\"#D6BAE3\",\"#A144DB\"];\n    // const discreteColors =  [\"#ED82B9\",\"#9BD3A3\",\"#E3378F\",\"#5FB96C\",\"#AA296B\",\"#3B7444\"];\n    const numDiscrete = discreteColors.length / 2;\n\n    const getDiscreteColor = (td: Typing.TokenData) => {\n        var colorstr = \"rgb()\";\n        if (td.type === \"query\") {\n            colorstr = discreteColors[2 * (td.pos_int % numDiscrete) + 1];\n        } else if (td.type === \"key\") {\n            colorstr = discreteColors[2 * (td.pos_int % numDiscrete)];\n        }\n        const color = d3.color(colorstr)?.rgb();\n        if (!color) return [0, 0, 0];\n        return [color.r, color.g, color.b];\n    };\n    const colorsByDiscretePosition = tokenData.map((td) => getDiscreteColor(td));\n\n    const punctColors =  [\"#F39226\",\"#E3378F\",\"#2E93D9\",\"#5FB96C\"];\n    const getPunctColor = (td: Typing.TokenData) => {\n        var colorstr = \"rgb()\";\n        var punctuationless = td.value.replace(/[.,\\/#!$?%\\^&\\*;:{}+=\\-_`'\"~()]/g, \"\");\n\n        if (punctuationless.length == 0) {\n            // token is only punctuation characters\n            colorstr = td.type === \"query\" ? punctColors[2] : punctColors[0]\n        } else {\n            // token has alphanumeric characters\n            colorstr = td.type === \"query\" ? punctColors[3] : punctColors[1]\n        }\n\n        const color = d3.color(colorstr)?.rgb();\n        if (!color) return [0, 0, 0];\n        return [color.r, color.g, color.b];\n    }\n\n    const colorsByPunctuation = tokenData.map((td) => getPunctColor(td));\n\n    // compute msgs for each token\n    const pos_msgs = tokenData.map(\n        (td) =>\n            `<b class='${td.type}'>${td.value}</b> (<i>${td.type}</i>, pos: ${td.pos_int} of ${td.length})`\n    );\n    const cat_msgs = tokenData.map(\n        (td) =>\n            `<b class='${td.type}'>${td.value}</b> (<i>${td.type}</i>, pos: ${td.pos_int} of ${td.length}, pos % 5: ${td.pos_int % 5})`\n    );\n    const length_msgs = tokenData.map(\n        (td) =>\n            `<b class='${td.type}'>${td.value}</b> (<i>${td.type}</i>, pos: ${td.pos_int} of ${td.length}, length: ${td.value.length})`\n    );\n\n    // for recording the x/y ranges\n    let xs = [];\n    let ys = [];\n\n    // loop each plot (layer-head pair)\n    for (const md of matrixData) {\n        const { layer, head } = md;\n\n        // compute plot-wise offset\n        const xoffset = md.head * (matrixCellWidth + matrixCellMargin);\n        const yoffset = -md.layer * (matrixCellHeight + matrixCellMargin);\n        // console.log(`compute data: layer ${md.layer}, head ${md.head}`);\n\n        // compute coordinates for each token\n        const data = md.tokens;\n        const computeCoordinate = (projectionMethod: keyof Typing.PointCoordinate) => {\n            const getX = (x: Typing.TokenCoordinate) => {\n                if (projectionMethod === 'tsne') return x.tsne_x\n                else if (projectionMethod === 'umap') return x.umap_x\n                else if (projectionMethod === 'pca') return x.pca_x\n                else if (projectionMethod === 'tsne_3d') return x.tsne_x_3d\n                else if (projectionMethod === 'umap_3d') return x.umap_x_3d\n                else if (projectionMethod === 'pca_3d') return x.pca_x_3d\n                else throw Error('Invalid projection method')\n            }\n            const getY = (x: Typing.TokenCoordinate) => {\n                if (projectionMethod === 'tsne') return x.tsne_y\n                else if (projectionMethod === 'umap') return x.umap_y\n                else if (projectionMethod === 'pca') return x.pca_y\n                else if (projectionMethod === 'tsne_3d') return x.tsne_y_3d\n                else if (projectionMethod === 'umap_3d') return x.umap_y_3d\n                else if (projectionMethod === 'pca_3d') return x.pca_y_3d\n                else throw Error('Invalid projection method')\n            }\n            const getZ = (x: Typing.TokenCoordinate) => {\n                if (projectionMethod === 'tsne_3d') return x.tsne_z_3d\n                else if (projectionMethod === 'umap_3d') return x.umap_z_3d\n                else if (projectionMethod === 'pca_3d') return x.pca_z_3d\n                else throw Error('Invalid projection method')\n            }\n            const xScale = d3\n                .scaleLinear()\n                .domain(d3.extent(data.map((x) => getX(x))) as any)\n                .range([0, matrixCellWidth]);\n            const yScale = d3\n                .scaleLinear()\n                .domain(d3.extent(data.map((x) => getY(x))) as any)\n                .range([0, matrixCellHeight]);\n\n            if (projectionMethod === \"tsne\" || projectionMethod === \"umap\" || projectionMethod === \"pca\") { // 2d case\n                return data.map(d => [+xScale(getX(d)).toFixed(6) + xoffset, +yScale(getY(d)).toFixed(6) + yoffset] as [number, number]);\n            }\n            // 3d case\n            const zScale = d3\n                .scaleLinear()\n                .domain(d3.extent(data.map((x) => getZ(x))) as any)\n                .range([0, matrixCellHeight]);\n            return data.map(d => [+xScale(getX(d)).toFixed(6) + xoffset, \n                +yScale(getY(d)).toFixed(6) + yoffset, \n                +zScale(getZ(d)).toFixed(6)] as [number, number, number]);\n        }\n        const pointsCoordinates = {\n            'tsne': computeCoordinate('tsne'),\n            'umap': computeCoordinate('umap'),\n            'pca': computeCoordinate('pca'),\n            'tsne_3d': computeCoordinate('tsne_3d'),\n            'umap_3d': computeCoordinate('umap_3d'),\n            'pca_3d': computeCoordinate('pca_3d')\n        }\n\n        // compute colors based on norms\n        queryColor.domain(d3.extent(data.map(x => x.norm)) as [number, number]);\n        keyColor.domain(d3.extent(data.map(x => x.norm)) as [number, number]);\n        const colorsByNorm = data.map((x, index) => {\n            const tokenType = tokenData[index].type;\n            let colorstr = \"rgb()\";\n            if (tokenType === 'query') {\n                colorstr = queryColor(x.norm);\n            } else if (tokenType === \"key\") {\n                colorstr = keyColor(x.norm);\n            }\n            const color = d3.color(colorstr)?.rgb();\n            if (!color) return [0, 0, 0];\n            return [color.r, color.g, color.b];\n        })\n\n        const norm_msgs = data.map(\n            (x, index) =>\n                `<b class='${tokenData[index].type}'>${tokenData[index].value}</b> (<i>${tokenData[index].type}</i>, pos: ${tokenData[index].pos_int} of ${tokenData[index].length}, norm: ${Math.round(x.norm * 100) / 100})`\n        );\n\n        const norms = data.map((x) => x.norm);\n        const norm_range = d3.extent(norms) as [number, number];\n        const min_norm = norm_range[0];\n        const max_norm = norm_range[1];\n        const range_norm = max_norm - min_norm;\n        // round to 6 decimal places\n        const norms_scaled = norms.map((x) => {\n            let scaled = (x - min_norm) / range_norm;\n            return +scaled.toFixed(6);\n        });\n\n        const colorsByType = data.map((x, index) => {\n            const tokenType = tokenData[index].type\n            let colorstr = \"rgb()\";\n            if (tokenType === \"query\") {\n                colorstr = \"rgb(95, 185, 108)\";\n            } else if (tokenType === \"key\") {\n                colorstr = \"rgb(227, 55, 143)\";\n            }\n            const color = d3.color(colorstr)?.rgb();\n            if (!color) return [0, 0, 0];\n            return [color.r, color.g, color.b];\n        })\n\n        const points = data.map((d, index) => ({\n            coordinate: {\n                tsne: pointsCoordinates.tsne[index] as [number, number],\n                umap: pointsCoordinates.umap[index] as [number, number],\n                pca: pointsCoordinates.pca[index] as [number, number],\n                tsne_3d: pointsCoordinates.tsne_3d[index] as [number, number, number],\n                umap_3d: pointsCoordinates.umap_3d[index] as [number, number, number],\n                pca_3d: pointsCoordinates.pca_3d[index] as [number, number, number],\n            },\n            color: {\n                type: colorsByType[index],\n                position: colorsByPosition[index],\n                categorical: colorsByDiscretePosition[index],\n                punctuation: colorsByPunctuation[index],\n                norm: colorsByNorm[index],\n                length: colorsByLength[index]\n            },\n            msg: {\n                position: pos_msgs[index],\n                categorical: cat_msgs[index],\n                norm: norm_msgs[index],\n                length: length_msgs[index]\n            },\n            layer,\n            head,\n            index,\n            value: values[index],\n            type: types[index],\n            normScaled: norms_scaled[index]\n        }));\n\n        xs.push(...[xoffset, matrixCellWidth + xoffset]);\n        ys.push(...[yoffset, matrixCellHeight + yoffset]);\n\n        results.push(...points);\n    }\n\n    return {\n        'points': results,\n        'range': {\n            'x': d3.extent(xs) as [number, number],\n            'y': d3.extent(ys) as [number, number]\n        }\n    }\n};\n\n/**\n * Compute text headings for each plot (head-layer)\n */\nconst computeMatrixProjectionLabel = (matrixData: Typing.MatrixData[], matrixCellWidth = 100, matrixCellHeight = 100, matrixCellMargin = 20) => {\n    var results = [] as Typing.PlotHead[];\n\n    for (const md of matrixData) {\n        results.push({\n            layer: md.layer,\n            head: md.head,\n            title: `L${md.layer} H${md.head}`,\n            coordinate: [\n                md.head * (matrixCellWidth + matrixCellMargin),\n                -md.layer * (matrixCellHeight + matrixCellMargin),\n            ],\n        });\n    }\n    return results;\n};\n\nconst computeMatrixProjection = (matrixData: Typing.MatrixData[], tokenData: Typing.TokenData[], matrixCellWidth = 100, matrixCellHeight = 100, matrixCellMargin = 20): Typing.Projection => {\n    const pts = computeMatrixProjectionPoint(matrixData, tokenData, matrixCellWidth, matrixCellHeight, matrixCellMargin)\n    return {\n        'points': pts.points,\n        'range': pts.range,\n        'headings': computeMatrixProjectionLabel(matrixData, matrixCellWidth, matrixCellHeight, matrixCellMargin)\n    }\n}\n\nexport {\n    computeMatrixProjection\n}","\nimport {\n    onMounted,\n    computed,\n    reactive,\n    toRefs,\n    h,\n    watch,\n    defineComponent,\n    PropType,\n    shallowRef,\n} from \"vue\";\nimport * as _ from \"underscore\";\nimport * as d3 from \"d3\";\nimport { useStore } from \"@/store/index\";\nimport { ScatterGL, Point2D } from \"scatter-gl\";\n\nimport { Typing } from \"@/utils/typing\";\n\nimport { Deck, OrbitView, OrthographicView, View } from \"@deck.gl/core/typed\";\n// import interface {Deck} from \"@deck.gl/core/typed\";\nimport { PolygonLayer, ScatterplotLayer, TextLayer, LineLayer } from \"@deck.gl/layers/typed\";\nimport { toTypeString } from \"@vue/shared\";\n\nimport { computeMatrixProjection } from \"@/utils/dataTransform\";\nimport { Line, StaticReadUsage, TubeBufferGeometry } from \"three\";\nimport { head, initial } from \"underscore\";\nimport { STATEMENT_TYPES, validate } from \"@babel/types\";\nimport RBush from 'rbush';\nimport { dragDisable } from \"d3\";\n\n// constants\nconst matrixCellHeight = 100;\nconst matrixCellWidth = 100;\nconst matrixCellMargin = 20;\n\nlet canvasWidth: number, canvasHeight: number;\nlet timeout: any;\nlet zoomThreshold = 2.5;\n\ninterface ViewState {\n    target: number[];\n    zoom: number;\n    minZoom: number;\n    maxZoom: number;\n    transitionDuration: number;\n}\nconst nullInitialView: ViewState = {\n    target: [0, 0, 0],\n    zoom: -1,\n    minZoom: -1.5,\n    maxZoom: 9,\n    transitionDuration: 1000,\n};\n\nconst nullInitialViewZoom: ViewState = {\n    target: [0, 0, 0],\n    zoom: zoomThreshold,\n    minZoom: -1.5,\n    maxZoom: 9,\n    transitionDuration: 1000,\n};\n\nlet initialState = nullInitialView;\nlet initialStateZoom = nullInitialViewZoom;\n\nconst defaultOpacity = 225,\n    lightOpacity = 50;\n\nexport default defineComponent({\n    components: {},\n    setup(props, context) {\n        const store = useStore();\n\n        const state = reactive({\n            matrixData: computed(() => store.state.matrixData),\n            tokenData: computed(() => store.state.tokenData),\n            viewState: nullInitialView,\n            highlightedTokenIndices: computed(() => store.state.highlightedTokenIndices),\n            attentionByToken: computed(() => store.state.attentionByToken),\n            projectionMethod: computed(() => store.state.projectionMethod),\n            colorBy: computed(() => store.state.colorBy),\n            view: computed(() => store.state.view),\n            mode: computed(() => store.state.mode),\n            userTheme: computed(() => store.state.userTheme),\n            curLayer: computed(() => store.state.layer),\n            curHead: computed(() => store.state.head),\n            doneLoading: computed(() => store.state.doneLoading),\n            showAll: computed(() => store.state.showAll),\n            showAttention: computed(() => store.state.showAttention),\n            sizeByNorm: computed(() => store.state.sizeByNorm),\n            zoom: nullInitialView.zoom,\n            clickedPoint: \"\" as any,\n            activePoints: [] as Typing.Point[],\n            dimension: computed(() => store.state.dimension),\n            cursorX: 0,\n            cursorY: 0,\n            transitionInProgress: false,\n            attentionLoading: computed(() => store.state.attentionLoading),\n        });\n\n        var shallowData = shallowRef({\n            points: [],\n            headings: [],\n            range: {\n                x: [0, 0],\n                y: [0, 0],\n            },\n        } as Typing.Projection);\n\n        var deckgl = {} as Deck;\n\n        // helper functions for layers\n        const getPointCoordinate = (d: Typing.Point) => {\n            switch (state.projectionMethod) {\n                case \"tsne\":\n                    return state.dimension === \"2D\" ? d.coordinate.tsne : d.coordinate.tsne_3d;\n                case \"umap\":\n                    return state.dimension === \"2D\" ? d.coordinate.umap : d.coordinate.umap_3d;\n                case \"pca\":\n                    return state.dimension === \"2D\" ? d.coordinate.pca : d.coordinate.pca_3d;\n                default:\n                    throw Error(\"Invalid projection method!\");\n            }\n        };\n\n        const tree = new RBush(); // fast label overlap detection\n        const sizeMeasurer = (label: string, fontSize: number) => {\n            let threshold =\n                state.zoom <= 5\n                    ? 2\n                    : state.zoom <= 7\n                        ? 2.25\n                        : state.zoom <= 8.5\n                            ? 2.5\n                            : 4;\n            if (state.zoom > 3.5 && state.zoom <= 8.5 && state.dimension === \"3D\") {\n                threshold *= 1.5;\n            }\n            const size = {\n                width: fontSize * (1 / Math.pow(threshold, state.zoom)) * label.length,\n                height: fontSize\n            };\n            return size;\n        }\n\n        // LAYERS\n        const toLineLayer = (points: Typing.Point[]) => {\n            const clickedIndex = state.clickedPoint.index;\n            const clickedType = state.clickedPoint.type;\n            const sourcePosition = getPointCoordinate(state.clickedPoint);\n            const searchIndex = state.tokenData[clickedIndex].pos_int;\n            let minIndex = clickedIndex - searchIndex;\n            const offset = state.tokenData.length / 2;\n            if (clickedType === \"query\") {\n                minIndex += offset;\n            } else {\n                minIndex -= offset;\n            }\n\n            return new LineLayer({\n                id: \"attention-line-layer\",\n                pickable: false,\n                data: points,\n                widthMaxPixels: 10,\n                widthScale: 5,\n                getSourcePosition: sourcePosition,\n                getTargetPosition: (d: Typing.Point) => getPointCoordinate(d),\n                getColor: (d: Typing.Point) => {\n                    if (d.index == clickedIndex || d.type === clickedType) {\n                        // don't show line to self or same type of token\n                        return [255, 255, 255, 0];\n                    }\n                    const arrayIndex = d.index - minIndex;\n                    const opacity = state.attentionByToken.attns[searchIndex][arrayIndex] * 255;\n\n                    if (opacity == 0) { // fix 3d lines\n                        return [255, 255, 255, 0];\n                    }\n\n                    return clickedType === \"query\" ?\n                        state.userTheme == \"light-theme\"\n                            ? [43, 91, 25, opacity]\n                            : [194, 232, 180, opacity]\n                        : state.userTheme == \"light-theme\"\n                            ? [117, 29, 58, opacity]\n                            : [240, 179, 199, opacity];\n                },\n                updateTriggers: {\n                    getSourcePosition: [state.projectionMethod, state.dimension],\n                    getTargetPosition: [state.projectionMethod, state.dimension],\n                    getColor: [state.attentionByToken, state.userTheme]\n                }\n            });\n        }\n\n        const toPointOutlineLayer = (points: Typing.Point[]) => {\n            return new ScatterplotLayer({\n                id: \"point-outline-layer\",\n                pickable: false,\n                data: points,\n                radiusMaxPixels: 8,\n                stroked: true,\n                getPosition: (d: Typing.Point) => getPointCoordinate(d),\n                getRadius: (d: Typing.Point) => {\n                    return state.mode === \"single\" && state.sizeByNorm\n                        ? (0.15 + d.normScaled * 0.5) * 3\n                        : 4\n                },\n                getFillColor: [255, 195, 0, 255],\n                getLineColor: state.userTheme != \"light-theme\" ? [255, 255, 255, 255] : [0, 0, 0, 255],\n                getLineWidth: 1 / state.zoom,\n                lineWidthMaxPixels: 1,\n                updateTriggers: {\n                    getFillColor: [state.userTheme],\n                    getRadius: [state.sizeByNorm],\n                    getPosition: [state.projectionMethod, state.dimension]\n                },\n            })\n        }\n\n        const toPointLayer = (points: Typing.Point[]) => {\n            return new ScatterplotLayer({\n                id: \"point-layer\",\n                pickable: state.mode == 'single',\n                data: points,\n                radiusMaxPixels: 5,\n                stroked: state.mode == 'single',\n                getPosition: (d: Typing.Point) => getPointCoordinate(d),\n                getRadius: (d: Typing.Point) => {\n                    let defaultSize = 0.4,\n                        highlightedSize = 2;\n\n                    if (state.mode === \"single\" && state.sizeByNorm) {\n                        // scale dot size by norm if checkbox on\n                        // maybe still need adjustment for highlighted size?\n                        defaultSize = 0.15 + d.normScaled * 0.5;\n                        highlightedSize = defaultSize * 2;\n                    }\n\n                    // otherwise, proceed as normal\n                    if (state.highlightedTokenIndices.length === 0) return defaultSize;\n                    return state.highlightedTokenIndices.includes(d.index)\n                        ? highlightedSize\n                        : defaultSize;\n                },\n                getLineWidth: (d: Typing.Point) => {\n                    return (\n                        state.highlightedTokenIndices.includes(d.index)\n                            ? 1 / state.zoom\n                            : 0\n                    ) as any;\n                },\n                lineWidthMaxPixels: 1,\n                getLineColor: (d: Typing.Point) => {\n                    const activeColor = state.userTheme != \"light-theme\" ? [255, 255, 255, 255] : [0, 0, 0, 255],\n                        unactiveColor = [255, 255, 255, 0];\n                    return (\n                        state.highlightedTokenIndices.includes(d.index)\n                            ? activeColor\n                            : unactiveColor\n                    ) as any;\n                },\n                getFillColor: (d: Typing.Point) => {\n                    const getColor = (d: Typing.Point) => {\n                        switch (state.colorBy) {\n                            case 'type':\n                                return d.color.type\n                            case 'position':\n                                return d.color.position\n                            case 'categorical':\n                                return d.color.categorical\n                            case 'norm':\n                                return d.color.norm\n                            case 'punctuation':\n                                return d.color.punctuation\n                            case 'length':\n                                return d.color.length\n                            default:\n                                throw Error('invalid color channel')\n                        }\n                    }\n                    const defaultColor = [...getColor(d), 175],\n                        highlightColorQuery = [84, 148, 61, 175],\n                        highlightColorQueryDark = [157, 216, 135, 175],\n                        highlightColorKey = [193, 91, 125, 175],\n                        highlightColorKeyDark = [234, 138, 170, 175],\n                        unactiveColor = [...getColor(d), 25];\n                    if (!state.highlightedTokenIndices.length) return defaultColor;\n                    return (\n                        state.highlightedTokenIndices.includes(d.index)\n                            ? d.type == \"query\"\n                                ? state.userTheme == \"light-theme\"\n                                    ? highlightColorQuery\n                                    : highlightColorQueryDark\n                                : state.userTheme == \"light-theme\"\n                                    ? highlightColorKey\n                                    : highlightColorKeyDark\n                            : unactiveColor\n                    ) as any;\n                },\n                onClick: (info, event) => {\n                    if (state.mode === 'matrix') {\n                        return;\n                    }\n                    console.log('onClick', info.object);\n                    store.commit(\"setView\", 'attn');\n                    store.commit(\"updateAttentionLoading\", true);\n\n                    let pt = info.object as Typing.Point;\n                    state.clickedPoint = pt;\n                    store.dispatch(\"setClickedPoint\", pt);\n\n                    let pt_info = state.tokenData[pt.index];\n                    let offset = state.tokenData.length / 2;\n                    let start_index = pt.index - pt_info.pos_int;\n\n                    let same_indices = Array.from({ length: pt_info.length }, (x, i) => i + start_index);\n                    if (pt_info.type === \"key\") {\n                        start_index -= offset;\n                    } else {\n                        start_index += offset;\n                    }\n\n                    let opposite_indices = Array.from({ length: pt_info.length }, (x, i) => i + start_index);\n                    let tokenIndices = [...same_indices, ...opposite_indices];\n                    store.commit(\"setHighlightedTokenIndices\", tokenIndices);\n                },\n                updateTriggers: {\n                    getFillColor: [state.colorBy, state.highlightedTokenIndices, state.userTheme],\n                    getRadius: [state.highlightedTokenIndices, state.sizeByNorm],\n                    getPosition: [state.projectionMethod, state.dimension]\n                },\n            });\n        };\n        const toLabelOutlineLayer = (points: Typing.Point[], visiblePoints: boolean[]) => {\n            return new TextLayer({\n                id: \"label-outline-layer\",\n                data: points,\n                pickable: false,\n                getPosition: (d: Typing.Point) => {\n                    if (!state.showAll || !visiblePoints[d.index]) {\n                        return state.dimension === \"2D\" ? [0, 0] : [0, 0, 0];\n                    }\n                    let coord = getPointCoordinate(d);\n                    let whiteOffset = state.zoom <= 3.5\n                        ? 0.1\n                        : state.zoom <= 5.5\n                            ? 0.1 / state.zoom\n                            : state.zoom <= 8\n                                ? 0.08 / state.zoom\n                                : 0.05 / (1.5 * state.zoom);\n                    let offset = 1 / Math.pow(1.5, state.zoom) + whiteOffset;\n                    return [coord[0] + offset, coord[1] + whiteOffset];\n                },\n                getText: (d: Typing.Point) => d.value,\n                getColor: (d: Typing.Point) => {\n                    if (!state.showAll || !visiblePoints[d.index]) {\n                        return [255, 255, 255, 0];\n                    }\n                    return state.userTheme == \"light-theme\"\n                        ? [255, 255, 255, defaultOpacity]\n                        : [0, 0, 0, defaultOpacity];\n                },\n                getSize: 12,\n                getAngle: 0,\n                getTextAnchor: \"start\",\n                getAlignmentBaseline: \"center\",\n                updateTriggers: {\n                    getColor: [state.zoom, state.highlightedTokenIndices, state.userTheme, state.showAll],\n                    getPosition: [state.projectionMethod, state.zoom]\n                },\n            });\n        };\n\n        const toPointLabelLayer = (points: Typing.Point[], visiblePoints: boolean[]) => {\n            return new TextLayer({\n                id: \"point-label-layer\",\n                data: points, // (state.pointScaleFactor < 0.3) ? points: [],\n                pickable: false,\n                getPosition: (d: Typing.Point) => {\n                    if (!state.showAll || !visiblePoints[d.index]) {\n                        return state.dimension === \"2D\" ? [0, 0] : [0, 0, 0];\n                    }\n                    let coord = getPointCoordinate(d);\n                    let offset = 1 / Math.pow(1.5, state.zoom);\n                    return coord.length == 2\n                        ? [coord[0] + offset, coord[1]]\n                        : [coord[0] + offset, coord[1], coord[2] + offset];\n                },\n                getText: (d: Typing.Point) => d.value,\n                getColor: (d: Typing.Point) => {\n                    if (!state.showAll || !visiblePoints[d.index]) {\n                        return [255, 255, 255, 0];\n                    }\n                    if (state.highlightedTokenIndices.length === 0)\n                        return d.type == \"query\"\n                            ? state.userTheme == \"light-theme\"\n                                ? [43, 91, 25, defaultOpacity]\n                                : [194, 232, 180, defaultOpacity]\n                            : state.userTheme == \"light-theme\"\n                                ? [117, 29, 58, defaultOpacity]\n                                : [240, 179, 199, defaultOpacity]\n                    return state.highlightedTokenIndices.includes(d.index)\n                        ? d.type == \"query\"\n                            ? state.userTheme == \"light-theme\"\n                                ? [43, 91, 25, defaultOpacity]\n                                : [194, 232, 180, defaultOpacity]\n                            : state.userTheme == \"light-theme\"\n                                ? [117, 29, 58, defaultOpacity]\n                                : [240, 179, 199, defaultOpacity]\n                        : d.type == \"query\"\n                            ? state.userTheme == \"light-theme\"\n                                ? [43, 91, 25, lightOpacity]\n                                : [194, 232, 180, lightOpacity]\n                            : state.userTheme == \"light-theme\"\n                                ? [117, 29, 58, lightOpacity]\n                                : [240, 179, 199, lightOpacity];\n                },\n                getSize: 12,\n                getAngle: 0,\n                getTextAnchor: \"start\",\n                getAlignmentBaseline: \"center\",\n                updateTriggers: {\n                    getColor: [state.zoom, state.highlightedTokenIndices, state.userTheme, state.showAll, state.dimension],\n                    getPosition: [state.projectionMethod, state.zoom]\n                },\n            });\n        };\n\n        const toPlotHeadLayer = (headings: Typing.PlotHead[]) => {\n            return new TextLayer({\n                id: \"text-layer\",\n                data: headings,\n                pickable: false,\n                getPosition: (d: Typing.PlotHead) => d.coordinate,\n                getText: (d: Typing.PlotHead) => d.title,\n                getSize: state.mode == 'single' ? 24 : 20,\n                sizeMaxPixels: 24,\n                getAngle: 0,\n                getColor: state.userTheme == 'light-theme' ? [0, 0, 0] : [255, 255, 255],\n                sizeUnits: state.mode == 'single' ? \"pixels\" : \"common\",\n                getTextAnchor: \"start\",\n                getAlignmentBaseline: \"center\",\n                updateTriggers: {\n                    getColor: state.userTheme\n                }\n            });\n        };\n\n        const toOverlayLayer = (headings: Typing.PlotHead[]) => {\n            return new PolygonLayer({\n                id: \"overlay-layer\",\n                data: headings,\n                pickable: true,\n                strokable: false,\n                filled: true,\n                extruded: state.dimension == \"3D\",\n                getPolygon: d => [\n                    d.coordinate,\n                    [d.coordinate[0], d.coordinate[1] + matrixCellHeight],\n                    [d.coordinate[0] + matrixCellWidth, d.coordinate[1] + matrixCellHeight],\n                    [d.coordinate[0] + matrixCellWidth, d.coordinate[1]],\n                ],\n                getFillColor: [255, 255, 255, 0],\n                getElevation: 100,\n                getLineWidth: 0,\n                onClick: (info, event) => {\n                    let obj = info.object as Typing.PlotHead;\n                    zoomToPlot(obj.layer, obj.head, true);\n                },\n                updateTriggers: {\n                    getPosition: [state.projectionMethod, state.zoom]\n                },\n            });\n        };\n\n        const makeTree = (d: Typing.Point) => {\n            let coord = getPointCoordinate(d);\n            let labelSize = sizeMeasurer(d.value, 12);\n            let new_coord = {\n                minX: coord[0] - 0.5 * labelSize.width,\n                minY: coord[1] - 0.5 * labelSize.width,\n                maxX: coord[0] + 0.5 * labelSize.width,\n                maxY: coord[1] + 0.5 * labelSize.height\n            }\n            const overlap = tree.collides(new_coord);\n            if (overlap) {\n                // return [255, 255, 255, 0];\n                return false;\n            }\n            tree.insert(new_coord);\n            return true;\n        }\n\n        const toLayers = () => {\n            let { points, headings } = shallowData.value;\n            if (state.curHead !== \"\" && state.curLayer !== \"\") { // single mode\n                // filter only points in this layer\n                const pointsPerHead = points.length / headings.length; // number points per attention head\n                let headIndex = headings.findIndex((d) => d.layer == state.curLayer && d.head == state.curHead);\n                let startInd = pointsPerHead * headIndex;\n                let endInd = startInd + pointsPerHead;\n\n                const layer_points = points.slice(startInd, endInd);\n                state.activePoints = layer_points;\n                const layer_headings = headings[headIndex];\n\n                tree.clear(); // reset RBush on change\n                const visiblePoints = layer_points.map((v) => makeTree(v));\n\n                let layers = [];\n                if (state.view === 'attn') {\n                    if (state.showAttention) { // show lines in attention view if checkbox on\n                        if (state.clickedPoint != \"\") { // already in attn view\n                            state.clickedPoint = layer_points[state.clickedPoint.index];\n                        }\n                        const attn_points = layer_points.filter((v) => state.highlightedTokenIndices.includes(v.index));\n                        layers.push(toLineLayer(attn_points));\n                    }\n                    // add extra outline for clicked point\n                    layers.push(toPointOutlineLayer([state.clickedPoint]));\n                }\n\n                layers.push(toPointLayer(layer_points));\n                layers.push(toPlotHeadLayer([layer_headings]));\n\n                if (state.dimension == \"2D\") {\n                    // only white outline around labels in 2d view\n                    layers.push(toLabelOutlineLayer(layer_points, visiblePoints));\n                }\n\n                layers.push(toPointLabelLayer(layer_points, visiblePoints));\n\n                return layers;\n            }\n            // else: return matrix view\n            return [toPointLayer(points), toPlotHeadLayer(headings), toOverlayLayer(headings)];\n        };\n\n        /**\n         * The main function for drawing the scatter matrices\n         */\n        const initMatrices = () => {\n            const { points, headings, range } = shallowData.value;\n            console.log(\"initMatrices\", points, headings);\n            if (!points || !points.length) return;\n\n            // put init view state in the centre\n            canvasWidth = range.x[0] + range.x[1];\n            canvasHeight = range.y[0] + range.y[1];\n            initialState = {\n                target: [canvasWidth / 2, canvasHeight / 2, 0],\n                zoom: -1,\n                minZoom: -1.5,\n                maxZoom: 9,\n                transitionDuration: 1000,\n            };\n            state.viewState = state.mode === 'matrix' ? initialState : initialStateZoom;\n\n            deckgl = new Deck({\n                canvas: \"matrix-canvas\",\n                controller: true,\n                views: state.dimension == \"3D\" ?\n                    new OrbitView({\n                        orbitAxis: 'Y'\n                    })\n                    : new OrthographicView({\n                        flipY: false,\n                    }),\n                initialViewState: state.viewState,\n                layers: toLayers(),\n                getTooltip: ({ object }) => {\n                    const getMsg = (d: Typing.Point) => {\n                        switch (state.colorBy) {\n                            case 'type':\n                            case 'position':\n                            case 'punctuation':\n                                return d.msg.position\n                            case 'categorical':\n                                return d.msg.categorical\n                            case 'norm':\n                                return d.msg.norm\n                            case 'length':\n                                return d.msg.length\n                            default:\n                                throw Error('invalid msg channel')\n                        }\n                    }\n                    return object && {\n                        html: state.mode === 'matrix' ? object.title : getMsg(object),\n                        style: {\n                            color: \"#fff\",\n                            background: \"#222\"\n                        },\n                    }\n                },\n                onViewStateChange: (param) => {\n                    // if (state.mode == 'matrix') {\n                    //     return;\n                    // }\n                    if (param.interactionState.inTransition) {\n                        clearTimeout(timeout);\n                        timeout = setTimeout(function () {\n                            handleRequest(param);\n                        }, 100);\n                    }\n                },\n            });\n\n            // setTimeout needed here?\n            store.commit(\"updateRenderState\", false);\n        };\n\n        // const toggleDisableLabel = (zoom: number) => {\n        //     if (state.dimension == \"2D\") {\n        //         if (zoom >= 5 && state.disableLabel) {\n        //             store.commit(\"setDisableLabel\", false);\n        //         } else if (zoom < 5 && !state.disableLabel) {\n        //             store.commit(\"setDisableLabel\", true);\n        //             // store.commit(\"setShowAll\", false);\n        //         }\n        //     } else {\n        //         if (zoom >= 3 && state.disableLabel) {\n        //             store.commit(\"setDisableLabel\", false);\n        //         } else if (zoom < 3 && !state.disableLabel) {\n        //             store.commit(\"setDisableLabel\", true);\n        //             // store.commit(\"setShowAll\", false);\n        //         }\n        //     }\n        // }\n\n        onwheel = (event: WheelEvent) => { // track cursor position on zoom\n            if (state.transitionInProgress) {\n                event.preventDefault;\n            }\n\n            if (state.mode === \"matrix\") {\n                // only run if matrix mode\n                state.cursorX = event.offsetX;\n                state.cursorY = event.offsetY;\n            }\n        }\n\n        const handleRequest = (param: any) => {\n            // deal with transition b/t single & matrix mode and updating zoom\n            const zoom = param.viewState.zoom;\n            const old_zoom = state.zoom;\n            state.zoom = zoom;\n            let switchThreshold = zoomThreshold;\n\n            if (state.dimension === \"3D\") {\n                switchThreshold = 1.5;\n            }\n\n            state.transitionInProgress = true;\n            if (old_zoom < switchThreshold && zoom >= switchThreshold) {\n                // if matrix mode, zoom to closest graph on zoom\n                const closest = deckgl.pickObject({\n                    x: state.cursorX,\n                    y: state.cursorY,\n                    radius: 100,\n                    layerIds: ['overlay-layer'],\n                    unproject3D: state.dimension === \"3D\"\n                });\n                if (closest) {\n                    let obj = closest.object as Typing.PlotHead;\n                    zoomToPlot(obj.layer, obj.head, false);\n                }\n            } else if (old_zoom >= switchThreshold && zoom < switchThreshold) {\n                // if single mode\n                reset(false);\n            }\n\n            state.transitionInProgress = false;\n        };\n\n        /**\n         * Reset the view state to matrix mode\n         */\n        const reset = (clicked: boolean) => {\n            if (state.mode !== \"matrix\") {\n                store.commit(\"setMode\", \"matrix\");\n                store.commit(\"setLayer\", \"\");\n                store.commit(\"setHead\", \"\");\n                state.activePoints = [];\n            }\n\n            if (state.view == 'attn') {\n                store.commit(\"setHighlightedTokenIndices\", []);\n            }\n\n            state.viewState = initialState;\n\n            if (clicked) {\n                deckgl.setProps({\n                    initialViewState: state.viewState,\n                });\n            }\n        };\n\n        /* \n         * Reset zoom only\n         */\n        const resetZoom = () => {\n            const curTarget = state.viewState.target;\n            const center = deckgl.getViewports()[0].center;\n            const zoom = deckgl.getViewports()[0].zoom;\n            if (curTarget[0] == center[0] && curTarget[1] == center[1] && state.zoom == zoom && state.dimension === \"2D\") {\n                return; // no reset needed\n            }\n            if (state.mode == \"matrix\") {\n                deckgl.setProps({\n                    initialViewState: nullInitialView,\n                });\n            } else {\n                deckgl.setProps({\n                    initialViewState: nullInitialViewZoom,\n                });\n            }\n            deckgl.setProps({\n                initialViewState: state.viewState,\n            });\n        }\n\n        const computedProjection = () => {\n            let { matrixData, tokenData } = state;\n            if (matrixData.length && tokenData.length) {\n                let projData = computeMatrixProjection(matrixData, tokenData);\n                shallowData.value = projData;\n            }\n        };\n\n        /**\n         * Search and highlight tokens\n         * @param str\n         */\n        const onSearch = (str: string) => {\n            str = str.toLowerCase(); // convert to lowercase first to match other tokens\n            let tokenIndices = state.tokenData\n                .map((x, idx) => (x.value === str ? idx : undefined))\n                .filter((x) => x) as number[];\n            store.commit(\"setHighlightedTokenIndices\", tokenIndices);\n            return tokenIndices.length;\n        };\n\n        const printViewport = () => {\n            console.error(\"viewport\", deckgl.getViewports());\n        };\n\n        const zoomToPlot = (layer: number, head: number, clicked: boolean) => {\n            // zoom to plot\n            if (state.mode !== \"single\") {\n                store.commit(\"setMode\", \"single\");\n            }\n\n            const x_center = head * (matrixCellWidth + matrixCellMargin) + 0.5 * matrixCellWidth;\n            const y_center =\n                -layer * (matrixCellHeight + matrixCellMargin) + 0.5 * matrixCellHeight;\n            initialStateZoom = {\n                target: [x_center, y_center, 0],\n                zoom: zoomThreshold,\n                minZoom: -1.5,\n                maxZoom: 9,\n                transitionDuration: 1000,\n            };\n            state.viewState = initialStateZoom;\n\n            if (clicked) {\n                deckgl.setProps({\n                    initialViewState: state.viewState,\n                });\n            }\n\n            console.log(\"Layer \" + layer + \", Head \" + head);\n            store.commit(\"setLayer\", layer);\n            store.commit(\"setHead\", head);\n        };\n\n        onMounted(() => {\n            console.log(\"onMounted\");\n            computedProjection();\n        });\n\n        watch([() => state.matrixData, () => state.tokenData],\n            () => {\n                if (state.doneLoading) {\n                    computedProjection();\n                }\n            }\n        );\n\n        watch([shallowData], () => {\n            initMatrices();\n        });\n\n        watch(() => state.dimension, () => {\n            deckgl.setProps({\n                views: state.dimension == \"3D\" ?\n                    new OrbitView({\n                        orbitAxis: 'Y'\n                    })\n                    : new OrthographicView({\n                        flipY: false,\n                    }),\n            });\n\n            if (state.mode == \"single\") {\n                if (state.dimension === \"3D\") {\n                    resetZoom();\n                }\n                const curZoom = deckgl.getViewports()[0].zoom;\n                state.zoom = curZoom < zoomThreshold ? zoomThreshold : curZoom;\n            }\n\n            deckgl.setProps({ layers: [...toLayers()] });\n        })\n\n        // re-render the visualization whenever any of the following changes\n        watch(\n            [\n                () => state.highlightedTokenIndices,\n                () => state.projectionMethod,\n                () => state.colorBy,\n                () => state.userTheme,\n                () => state.curHead,\n                () => state.curLayer,\n                () => state.zoom,\n                () => state.showAll,\n                () => state.showAttention,\n                () => state.sizeByNorm,\n                () => state.attentionLoading,\n                () => state.clickedPoint,\n            ],\n            () => {\n                if (state.view === \"attn\" && state.attentionLoading) {\n                    // wait until attention info done loading\n                    return;\n                }\n                deckgl.setProps({ layers: [...toLayers()] });\n            }\n        );\n\n        watch([() => state.doneLoading, () => state.curLayer, () => state.curHead],\n            () => {\n                if (state.doneLoading && state.activePoints.length != 0 && state.view === \"attn\" && state.clickedPoint != \"\") {\n                    // fix attention view\n                    let ind = state.highlightedTokenIndices[state.highlightedTokenIndices.length - 1];\n                    let pt = state.activePoints[ind];\n                    state.clickedPoint = pt;\n                    store.dispatch(\"setClickedPoint\", pt);\n                }\n            }\n        )\n\n        watch(() => state.highlightedTokenIndices,\n            () => {\n                if (state.highlightedTokenIndices.length == 0) {\n                    store.commit(\"setView\", \"none\");\n                    state.clickedPoint = \"\";\n                }\n            })\n\n        // expose functions to the parent\n        context.expose({\n            reset,\n            resetZoom,\n            onSearch,\n            printViewport,\n            zoomToPlot,\n        });\n\n        return {\n            ...toRefs(state),\n        };\n    },\n});\n","import { render } from \"./MatrixView.vue?vue&type=template&id=22f1b35c&scoped=true&ts=true\"\nimport script from \"./MatrixView.vue?vue&type=script&lang=ts\"\nexport * from \"./MatrixView.vue?vue&type=script&lang=ts\"\n\nimport \"./MatrixView.vue?vue&type=style&index=0&id=22f1b35c&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/catherineyeh/Documents/research/attention viz/attn-viz/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-22f1b35c\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"legend\" }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"span\", null, \"q\", -1)\nconst _hoisted_3 = { class: \"low\" }\nconst _hoisted_4 = { class: \"high\" }\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"span\", null, \"k\", -1)\nconst _hoisted_6 = { class: \"low\" }\nconst _hoisted_7 = { class: \"high\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"bar-contain\", {\n            pos: _ctx.colorBy == 'position' || _ctx.colorBy == 'norm' || _ctx.colorBy == 'length', cat: _ctx.colorBy == 'categorical', pun: _ctx.colorBy == 'punctuation'\n        }])\n    }, [\n      _hoisted_2,\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"bar\", { smaller: _ctx.colorBy == 'norm' || _ctx.colorBy == 'punctuation' }])\n      }, [\n        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.lowLabel(_ctx.colorBy)), 1),\n        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_ctx.highLabel(_ctx.colorBy)), 1)\n      ], 2)\n    ], 2),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"bar-contain k\", {\n            pos: _ctx.colorBy == 'position' || _ctx.colorBy == 'norm' || _ctx.colorBy == 'length', cat: _ctx.colorBy == 'categorical', pun: _ctx.colorBy == 'punctuation'\n        }])\n    }, [\n      _hoisted_5,\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"bar\", { smaller: _ctx.colorBy == 'norm' || _ctx.colorBy == 'punctuation' }])\n      }, [\n        _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.lowLabel(_ctx.colorBy)), 1),\n        _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.highLabel(_ctx.colorBy)), 1)\n      ], 2)\n    ], 2)\n  ], 512)), [\n    [_vShow, !_ctx.renderState]\n  ])\n}","\nimport { onMounted, computed, reactive, toRefs, h, watch, ref, defineComponent } from \"vue\";\nimport { useStore } from \"@/store/index\";\n\nexport default defineComponent({\n    setup() {\n        const store = useStore();\n\n        const state = reactive({\n            colorBy: computed(() => store.state.colorBy),\n            renderState: computed(() => store.state.renderState)\n        });\n\n        return {\n            ...toRefs(state),\n        };\n    },\n    methods: {\n        lowLabel(colorBy: string) {\n            switch (colorBy) {\n                case 'position':\n                case 'categorical':\n                case 'length':\n                    return \"0\"\n                case 'norm':\n                    return \"low\"\n                case 'punctuation':\n                    return \".?!\"\n                default:\n                    \"\"\n            }\n        },\n        highLabel(colorBy: string) {\n            switch (colorBy) {\n                case 'position':\n                case 'length':\n                    return \"1\"\n                case 'categorical':\n                    return \"4\"\n                case 'norm':\n                    return \"high\"\n                case 'punctuation':\n                    return \"abc\"\n                default:\n                    \"\"\n            }\n        }\n    },\n})\n\n","import { render } from \"./Legend.vue?vue&type=template&id=e42fb72c&ts=true\"\nimport script from \"./Legend.vue?vue&type=script&lang=ts\"\nexport * from \"./Legend.vue?vue&type=script&lang=ts\"\n\nimport \"./Legend.vue?vue&type=style&index=0&id=e42fb72c&lang=scss\"\n\nimport exportComponent from \"/Users/catherineyeh/Documents/research/attention viz/attn-viz/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { onMounted, computed, reactive, toRefs, h, watch, ref, defineComponent } from \"vue\";\nimport { useStore } from \"@/store/index\";\n\nimport { Typing } from \"@/utils/typing\";\nimport MatrixView from \"./MatrixView/MatrixView.vue\";\nimport Legend from \"./Legend/Legend.vue\";\nimport { ArrowUpOutlined, ArrowDownOutlined, ArrowLeftOutlined, ArrowRightOutlined } from \"@ant-design/icons-vue\";\n\nexport default defineComponent({\n    components: { MatrixView, Legend, ArrowUpOutlined, ArrowDownOutlined, ArrowLeftOutlined, ArrowRightOutlined },\n    setup() {\n        const store = useStore();\n\n        const matrixView = ref(null);\n\n        const state = reactive({\n            mode: computed(() => store.state.mode),\n            renderState: computed(() => store.state.renderState),\n            searchToken: \"\",\n            view: computed(() => store.state.view),\n            showAll: computed(() => store.state.showAll),\n            sizeByNorm: computed(() => store.state.sizeByNorm),\n            showAttention: computed(() => store.state.showAttention),\n            // disableLabel: computed(() => store.state.disableLabel),\n            colorBy: computed(() => store.state.colorBy),\n            layer: computed(() => store.state.layer),\n            head: computed(() => store.state.head),\n            modelType: computed(() => store.state.modelType),\n            dimension: computed({\n                get: () => store.state.dimension,\n                set: (v) => store.commit(\"setDimension\", v)\n            }),\n        });\n\n        const onClickReset = () => {\n            (matrixView.value as any).resetZoom();\n        }\n\n        const resetToMatrix = () => {\n            (matrixView.value as any).reset(true);\n        }\n\n        const clearSearch = () => {\n            state.searchToken = \"\";\n            onSearch(state.searchToken);\n        }\n\n        const onSearch = (str: string) => {\n            store.commit(\"setView\", \"search\");\n            let num_results = (matrixView.value as any).onSearch(str);\n            // console.log(num_results);\n            if (str != \"\") { // display # search results\n                state.searchToken = str + \" (\" + num_results + \" results)\";\n            }\n        }\n\n        const logViewport = () => {\n            setTimeout(() => {\n                (matrixView.value as any).printViewport();\n            }, 100)\n        }\n\n        const toggleCheckbox = () => {\n            store.commit('setShowAll', !state.showAll);\n        }\n\n        const toggleCheckboxAttention = () => {\n            store.commit('setShowAttention', !state.showAttention);\n        }\n\n        const toggleCheckboxNorm = () => {\n            store.commit('setSizeByNorm', !state.sizeByNorm);\n        }\n\n        // zoom to single plot\n        const zoomToPlot = (layer: number, head: number) => {\n            (matrixView.value as any).zoomToPlot(layer, head, true);\n        }\n\n        // move 1 plot up/left/right/down\n        const moveToPlot = (direction: string) => {\n            switch (direction) {\n                case \"up\":\n                    zoomToPlot((state.layer as number) - 1, (state.head as number));\n                    break;\n                case \"left\":\n                    zoomToPlot((state.layer as number), (state.head as number) - 1);\n                    break;\n                case \"right\":\n                    zoomToPlot((state.layer as number), (state.head as number) + 1);\n                    break;\n                case \"down\":\n                    zoomToPlot((state.layer as number) + 1, (state.head as number));\n                    break;\n                default:\n                    throw Error(\"Invalid direction!\");\n            }\n        }\n\n        watch(() => state.view,\n            () => {\n                if (state.view == \"attn\") {\n                    state.searchToken = \"\";\n                }\n            })\n\n        watch(() => state.modelType,\n            () => { // clear highlighted tokens for simplicity\n                store.commit(\"setHighlightedTokenIndices\", []);\n                if (state.searchToken.length > 0) {\n                    state.searchToken = \"\";\n                }\n            })\n\n        return {\n            ...toRefs(state),\n            matrixView,\n            onClickReset,\n            resetToMatrix,\n            clearSearch,\n            onSearch,\n            logViewport,\n            zoomToPlot,\n            moveToPlot,\n            toggleCheckbox,\n            toggleCheckboxNorm,\n            toggleCheckboxAttention\n        };\n    }\n});\n","import { render } from \"./Projection.vue?vue&type=template&id=11ad2990&ts=true\"\nimport script from \"./Projection.vue?vue&type=script&lang=ts\"\nexport * from \"./Projection.vue?vue&type=script&lang=ts\"\n\nimport \"./Projection.vue?vue&type=style&index=0&id=11ad2990&lang=scss\"\n\nimport exportComponent from \"/Users/catherineyeh/Documents/research/attention viz/attn-viz/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, vShow as _vShow, createElementVNode as _createElementVNode, withDirectives as _withDirectives, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  class: \"viewHead\",\n  id: \"attn-map-view\"\n}\nconst _hoisted_2 = { class: \"align-top\" }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Sentence View \")\nconst _hoisted_4 = { class: \"attn-btns\" }\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"reset\")\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"span\", null, \"|\", -1)\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"clear\")\nconst _hoisted_8 = { class: \"subtitle\" }\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"label\" }, \"Hide\", -1)\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\"first token\")\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\"[cls]\")\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\"[sep]\")\nconst _hoisted_13 = { id: \"bertviz\" }\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"div\", { id: \"vis\" }, null, -1)\nconst _hoisted_15 = [\n  _hoisted_14\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_checkbox = _resolveComponent(\"a-checkbox\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"p\", null, [\n        _hoisted_3,\n        _createVNode(_Transition, null, {\n          default: _withCtx(() => [\n            _withDirectives(_createElementVNode(\"span\", null, \"(\" + _toDisplayString(_ctx.layerHead) + \")\", 513), [\n              [_vShow, _ctx.showAttn]\n            ])\n          ]),\n          _: 1\n        })\n      ]),\n      _createVNode(_Transition, null, {\n        default: _withCtx(() => [\n          _withDirectives(_createElementVNode(\"div\", _hoisted_4, [\n            _createVNode(_component_a_button, {\n              id: \"attn-reset\",\n              class: \"clear\",\n              type: \"link\",\n              onClick: $setup.resetAttn\n            }, {\n              default: _withCtx(() => [\n                _hoisted_5\n              ]),\n              _: 1\n            }, 8, [\"onClick\"]),\n            _hoisted_6,\n            _createVNode(_component_a_button, {\n              id: \"attn-clear\",\n              class: \"clear\",\n              type: \"link\",\n              onClick: $setup.clearAttn\n            }, {\n              default: _withCtx(() => [\n                _hoisted_7\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ], 512), [\n            [_vShow, _ctx.showAttn]\n          ])\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_ctx.attnMsg), 1),\n    _createVNode(_Transition, null, {\n      default: _withCtx(() => [\n        _withDirectives(_createElementVNode(\"div\", null, [\n          _hoisted_9,\n          _withDirectives(_createVNode(_component_a_checkbox, {\n            checked: _ctx.hideFirst,\n            \"onUpdate:checked\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.hideFirst) = $event)),\n            onClick: _cache[1] || (_cache[1] = ($event: any) => ($setup.hideTokens('first')))\n          }, {\n            default: _withCtx(() => [\n              _hoisted_10\n            ]),\n            _: 1\n          }, 8, [\"checked\"]), [\n            [_vShow, _ctx.model == 'gpt']\n          ]),\n          _withDirectives(_createVNode(_component_a_checkbox, {\n            checked: _ctx.hideFirst,\n            \"onUpdate:checked\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.hideFirst) = $event)),\n            onClick: _cache[3] || (_cache[3] = ($event: any) => ($setup.hideTokens('first')))\n          }, {\n            default: _withCtx(() => [\n              _hoisted_11\n            ]),\n            _: 1\n          }, 8, [\"checked\"]), [\n            [_vShow, _ctx.model == 'bert']\n          ]),\n          _withDirectives(_createVNode(_component_a_checkbox, {\n            checked: _ctx.hideLast,\n            \"onUpdate:checked\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.hideLast) = $event)),\n            onClick: _cache[5] || (_cache[5] = ($event: any) => ($setup.hideTokens('last')))\n          }, {\n            default: _withCtx(() => [\n              _hoisted_12\n            ]),\n            _: 1\n          }, 8, [\"checked\"]), [\n            [_vShow, _ctx.model == 'bert']\n          ])\n        ], 512), [\n          [_vShow, _ctx.showAttn]\n        ])\n      ]),\n      _: 1\n    }),\n    _createVNode(_Transition, null, {\n      default: _withCtx(() => [\n        _withDirectives(_createElementVNode(\"div\", _hoisted_13, _hoisted_15, 512), [\n          [_vShow, _ctx.showAttn]\n        ])\n      ]),\n      _: 1\n    })\n  ]))\n}","\nimport { onMounted, computed, reactive, toRefs, h, watch } from \"vue\";\nimport * as _ from \"underscore\";\nimport { useStore } from \"@/store/index\";\nimport * as d3 from \"d3\";\nimport moment from \"moment\";\nimport { getAttentionByToken } from \"@/services/dataService\";\n\ntype Config = {\n    attention: any;\n    filter: string;\n    rootDivId: string;\n    nLayers: number;\n    nHeads: number;\n    layers: number[];\n    headVis: any;\n    initialTextLength: number;\n    layer_seq: number;\n    layer: number;\n}\n\nconst TEXT_SIZE = 12;\nconst BOXWIDTH = 80;\nconst BOXHEIGHT = 18;\nconst MATRIX_WIDTH = 100;\nconst TEXT_TOP = 22;\n\nexport default {\n    components: {},\n    setup() {\n        const store = useStore();\n\n        const state = reactive({\n            attentionByToken: computed(() => store.state.attentionByToken),\n            showAttn: false,\n            attnMsg: \"click a plot to zoom in\",\n            highlightedTokenIndices: computed(() => store.state.highlightedTokenIndices),\n            view: computed(() => store.state.view),\n            curLayer: computed(() => store.state.layer),\n            curHead: computed(() => store.state.head),\n            layerHead: \"\",\n            userTheme: computed(() => store.state.userTheme),\n            mode: computed(() => store.state.mode),\n            model: computed(() => store.state.modelType),\n            attn_vals: [] as number[][],\n            cur_attn: [] as number[][],\n            hidden: { left: [] as number[], right: [] as number[] },\n            hideFirst: false,\n            hideLast: false\n        });\n\n        const hideKey = (ind: number) => {\n            return state.cur_attn.map((row: number[]) => {\n                let rem_attn = 1 - row[ind];\n                return row.map((cell: number, index: number) => {\n                    if (index != ind) {\n                        return rem_attn == 0 ? 0 : Math.min(1, cell / rem_attn);\n                    }\n                    return 0;\n                })\n            })\n        }\n\n        // start bertviz\n        const bertviz = () => {\n            // parse info from data\n            let { attentionByToken } = state;\n            state.attn_vals = attentionByToken.attns;\n            const token_type: string = attentionByToken.token.type;\n            const token_pos: number = attentionByToken.token.pos_int;\n            const token_text: string[] = attentionByToken.token.sentence.split(\" \");\n            if (token_type == \"key\") { // flip graph if key\n                state.attn_vals = transpose(state.attn_vals);\n            }\n            state.cur_attn = state.attn_vals;\n            state.hidden[\"left\"] = [];\n            state.hidden[\"right\"] = [];\n\n            // hide first/last tokens if checkboxes selected\n            if (state.hideFirst) {\n                state.cur_attn = hideKey(0);\n                state.hidden[\"right\"].push(0);\n            }\n            if (state.hideLast) {\n                state.cur_attn = hideKey(token_text.length - 1);\n                state.hidden[\"right\"].push(token_text.length - 1);\n            }\n\n            // const layer = attentionByToken.layer;\n            // const head = attentionByToken.head;\n            state.layerHead = \"L\" + state.curLayer + \" H\" + state.curHead;\n\n            const params = {\n                attention: [\n                    {\n                        name: null,\n                        attn: [[state.cur_attn]],\n                        left_text: token_text,\n                        right_text: token_text,\n                        layer: 0,\n                        head: 0,\n                    },\n                ],\n                default_filter: \"0\",\n                root_div_id: \"bertviz\",\n                layer: 0,\n                heads: [0],\n                include_layers: [0],\n            };\n\n            // let headColors = d3.scaleOrdinal(d3.schemePastel1);\n            let config: Config = initialize();\n            renderVis();\n\n            function initialize() {\n                let config: Config = {\n                    attention: params[\"attention\"],\n                    filter: params[\"default_filter\"],\n                    rootDivId: params[\"root_div_id\"],\n                    layers: params[\"include_layers\"],\n                    nHeads: 0,\n                    nLayers: 0,\n                    headVis: [],\n                    initialTextLength: 0,\n                    layer: 0,\n                    layer_seq: 0\n                }\n                config.nLayers = config.attention[config.filter][\"attn\"].length;\n                config.nHeads = config.attention[config.filter][\"attn\"][0].length;\n\n                if (params[\"heads\"]) {\n                    config.headVis = new Array(config.nHeads).fill(false);\n                    params[\"heads\"].forEach((x) => (config.headVis[x] = true));\n                } else {\n                    config.headVis = new Array(config.nHeads).fill(true);\n                }\n                config.initialTextLength =\n                    config.attention[config.filter].right_text.length;\n                config.layer_seq =\n                    params[\"layer\"] == null\n                        ? 0\n                        : config.layers.findIndex((layer) => params[\"layer\"] === layer);\n                config.layer = config.layers[config.layer_seq];\n                return config\n            }\n\n            function renderVis() {\n                // Load parameters\n                const attnData = config.attention[config.filter];\n                const leftText = attnData.left_text;\n                const rightText = attnData.right_text;\n\n                // Clear vis\n                document.getElementById(\"vis\")!.innerHTML = \"\";\n\n                // Select attention for given layer\n                const layerAttention = attnData.attn[config.layer_seq];\n\n                // Determine size of visualization\n                const height =\n                    Math.max(leftText.length, rightText.length) * BOXHEIGHT + TEXT_TOP;\n                const svg = d3\n                    .select(`#${config.rootDivId} #vis`)\n                    .append(\"svg\")\n                    .attr(\"id\", \"main-svg\")\n                    .attr(\"width\", \"100%\")\n                    .attr(\"height\", height + \"px\");\n\n                // set up gradient\n                const defs = svg.append(\"defs\");\n\n                const gradient = defs.append(\"linearGradient\")\n                    .attr(\"id\", \"svgGradient\")\n                    .attr(\"x1\", \"0%\")\n                    .attr(\"x2\", \"100%\")\n                    .attr(\"y1\", \"0%\")\n                    .attr(\"y2\", \"100%\")\n                    // .attr(\"gradientTransform\", \"rotate(-15)\")\n                    .attr(\"gradientUnits\", \"userSpaceOnUse\");\n\n                gradient.append(\"stop\")\n                    .attr('class', 'start')\n                    .attr(\"offset\", \"0%\")\n                    .attr(\"stop-color\", \"#9dd887\")\n                    .attr(\"stop-opacity\", 1);\n\n                gradient.append(\"stop\")\n                    .attr('class', 'end')\n                    .attr(\"offset\", \"100%\")\n                    .attr(\"stop-color\", \"#ea8aaa\")\n                    .attr(\"stop-opacity\", 1);\n\n                // Display tokens on left and right side of visualization\n                renderText(svg, leftText, true, layerAttention, 0);\n                renderText(\n                    svg,\n                    rightText,\n                    false,\n                    layerAttention,\n                    MATRIX_WIDTH + BOXWIDTH\n                );\n\n                // bold current selected token\n                const side = (token_type == 'query') ? \"left\" : \"right\";\n                let selected = document.querySelectorAll(\"#\" + side + \" text\")[token_pos + 1];\n                selected.classList.add(\"bold\");\n                selected.classList.add(token_type);\n\n                // Render attention arcs\n                renderAttention(svg, layerAttention);\n            }\n\n            function renderText(svg: any, text: string[], isLeft: boolean, attention: any, leftPos: number) {\n                const textContainer = svg\n                    .append(\"svg:g\")\n                    .attr(\"id\", isLeft ? \"left\" : \"right\");\n\n                // top labels\n                const topLabels = textContainer\n                    .append(\"text\")\n                    .attr(\"x\", leftPos)\n                    .attr(\"y\", 0)\n                    .text(isLeft ? \"query\" : \"key\")\n                    .attr(\"font-size\", (TEXT_SIZE + 2) + \"px\")\n                    .classed(\"bold\", true)\n                    .classed(isLeft ? \"query\" : \"key\", true);\n\n                if (isLeft) {\n                    topLabels\n                        .style(\"text-anchor\", \"end\")\n                        .attr(\"dx\", BOXWIDTH - 0.5 * TEXT_SIZE)\n                        .attr(\"dy\", TEXT_SIZE);\n                } else {\n                    topLabels\n                        .style(\"text-anchor\", \"start\")\n                        .attr(\"dx\", +0.5 * TEXT_SIZE)\n                        .attr(\"dy\", TEXT_SIZE);\n                }\n\n                // Add attention highlights superimposed over words\n                textContainer\n                    .append(\"g\")\n                    .classed(\"attentionBoxes\", true)\n                    .selectAll(\"g\")\n                    .data(attention)\n                    .enter()\n                    .append(\"g\")\n                    .attr(\"head-index\", (d: any, i: number) => i)\n                    .selectAll(\"rect\")\n                    .data((d: any) => (isLeft ? d : transpose(d)))\n                    // if right text and query token OR right text and key token, transpose attention to get right-to-left / left-to-right weights\n                    .enter()\n                    .append(\"rect\")\n                    .attr(\"x\", function (this: any) {\n                        var headIndex = +this.parentNode.getAttribute(\"head-index\");\n                        return leftPos + boxOffsets(headIndex);\n                    })\n                    .attr(\"y\", +1 * BOXHEIGHT)\n                    .attr(\"width\", BOXWIDTH / activeHeads())\n                    .attr(\"height\", BOXHEIGHT)\n                    .attr(\"fill\", function () {\n                        // return headColors(+this.parentNode.getAttribute(\"head-index\"));\n                        return isLeft ? \"rgb(157, 216, 135)\" : \"rgb(234, 138, 170)\";\n                    })\n                    .style(\"opacity\", 0.0);\n\n                const tokenContainer = textContainer\n                    .append(\"g\")\n                    .selectAll(\"g\")\n                    .data(text)\n                    .enter()\n                    .append(\"g\");\n\n                // Add gray background that appears when hovering over text\n                tokenContainer\n                    .append(\"rect\")\n                    .classed(\"background\", true)\n                    .style(\"opacity\", 0.0)\n                    // .attr(\"fill\", \"lightgray\")\n                    .attr(\"x\", leftPos)\n                    .attr(\"y\", (d: any, i: number) => TEXT_TOP + i * BOXHEIGHT)\n                    .attr(\"width\", BOXWIDTH)\n                    .attr(\"height\", BOXHEIGHT);\n\n                // Add token text\n                const textEl = tokenContainer\n                    .append(\"text\")\n                    .text((d: any) => d)\n                    .attr(\"font-size\", TEXT_SIZE + \"px\")\n                    .style(\"cursor\", \"default\")\n                    .style(\"-webkit-user-select\", \"none\")\n                    .classed(\"token-text\", true)\n                    .attr(\"x\", leftPos)\n                    .attr(\"y\", (d: any, i: number) => TEXT_TOP + i * BOXHEIGHT);\n\n                if (isLeft) {\n                    textEl\n                        .style(\"text-anchor\", \"end\")\n                        .attr(\"dx\", BOXWIDTH - 0.5 * TEXT_SIZE)\n                        .attr(\"dy\", TEXT_SIZE);\n                } else {\n                    textEl\n                        .style(\"text-anchor\", \"start\")\n                        .attr(\"dx\", +0.5 * TEXT_SIZE)\n                        .attr(\"dy\", TEXT_SIZE);\n                }\n\n                tokenContainer.on(\"click\", function (this: any, e: Event, d: any) {\n                    // toggle lines on and off on token click\n                    const select = tokenContainer.nodes();\n                    const ind = select.indexOf(this);\n                    if (ind == 0) {\n                        state.hideFirst = !state.hideFirst;\n                    } else if (ind == select.length - 1) {\n                        state.hideLast = !state.hideLast;\n                    }\n                    // let hidden = d3.select(this).classed(\"clicked\");\n                    // d3.select(this).classed(\"clicked\", !hidden);\n                    let hidden, new_attn;\n                    if (isLeft) { // query\n                        let hid_index = state.hidden[\"left\"].indexOf(ind);\n                        if (hid_index != -1) { // was hidden, now unhide\n                            hidden = true;\n                            delete state.hidden[\"left\"][hid_index];\n                        } else { // was visible, now hide\n                            hidden = false;\n                            state.hidden[\"left\"].push(ind);\n                        }\n\n                        let sent_length = state.cur_attn[ind].length;\n                        if (!hidden) { // hide\n                            state.cur_attn[ind] = new Array(sent_length).fill(0);\n                        } else { // show\n                            new_attn = state.cur_attn[ind].map((x, index) => {\n                                // reset to current state (account for any tokens that are hidden on right side)\n                                // if (!state.hidden[\"right\"].includes(index)) {\n                                return state.attn_vals[ind][index];\n                                // }\n                                // return 0;\n                            });\n                            state.cur_attn[ind] = new_attn;\n                        }\n                    } else { // key\n                        let hid_index = state.hidden[\"right\"].indexOf(ind);\n                        if (hid_index != -1) { // was hidden, now unhide\n                            hidden = true;\n                            delete state.hidden[\"right\"][hid_index];\n                        } else { // was visible, now hide\n                            hidden = false;\n                            state.hidden[\"right\"].push(ind);\n                        }\n                        if (!hidden) { // hide\n                            // 0 out cells corresponding to clicked on token\n                            new_attn = hideKey(ind);\n                        } else { // show again\n                            // add back cells corresponding to clicked on token\n                            new_attn = state.cur_attn.map((row: number[], index: number) => {\n                                // let token_val = state.attn_vals[index][ind];\n                                let rem_attn = 1;\n                                let row_index = index;\n                                state.hidden[\"right\"].forEach((x, index) => {\n                                    // account for other hidden keys too\n                                    rem_attn -= state.attn_vals[row_index][x];\n                                })\n                                // let rem_attn = 1 - token_val;\n                                return row.map((cell: number, index: number) => {\n                                    // if (index != ind) {\n                                    //     return cell * rem_attn;\n                                    // }\n                                    return rem_attn == 0 || state.hidden[\"right\"].includes(index)\n                                        ? 0\n                                        : Math.min(1, state.attn_vals[row_index][index] / rem_attn);\n                                })\n                            })\n                        }\n\n                        state.cur_attn = new_attn;\n                    }\n                    config.attention[config.filter].attn = [[state.cur_attn]];\n                    renderVis();\n                });\n\n                tokenContainer.on(\"mouseover\", function (this: any, e: Event, d: string) {\n                    const select = tokenContainer.nodes();\n                    const index = select.indexOf(this);\n\n                    // Show gray background for moused-over token\n                    textContainer\n                        .selectAll(\".background\")\n                        .style(\"opacity\", function (d: any, i: number) {\n                            return (i === index ? 1.0 : 0.0);\n                        });\n\n                    // Reset visibility attribute for any previously highlighted attention arcs\n                    svg\n                        .select(\"#attention\")\n                        .selectAll(\"line[visibility='visible']\")\n                        .attr(\"visibility\", null);\n\n                    // Hide group containing attention arcs\n                    svg.select(\"#attention\").attr(\"visibility\", \"hidden\");\n                    // Set to visible appropriate attention arcs to be highlighted\n                    if (isLeft) {\n                        svg\n                            .select(\"#attention\")\n                            .selectAll(\"line[left-token-index='\" + index + \"']\")\n                            .attr(\"visibility\", \"visible\");\n                    } else {\n                        svg\n                            .select(\"#attention\")\n                            .selectAll(\"line[right-token-index='\" + index + \"']\")\n                            .attr(\"visibility\", \"visible\");\n                    }\n\n                    // Update color boxes superimposed over tokens\n                    const id = isLeft ? \"right\" : \"left\";\n                    const leftPos = isLeft ? MATRIX_WIDTH + BOXWIDTH : 0;\n                    svg\n                        .select(\"#\" + id)\n                        .selectAll(\".attentionBoxes\")\n                        .selectAll(\"g\")\n                        .attr(\"head-index\", (d: any, i: number) => i)\n                        .selectAll(\"rect\")\n                        .attr(\"x\", function (this: any) {\n                            const headIndex = +this.parentNode.getAttribute(\"head-index\");\n                            return leftPos + boxOffsets(headIndex);\n                        })\n                        .attr(\"y\", (d: any, i: number) => TEXT_TOP + i * BOXHEIGHT)\n                        .attr(\"width\", BOXWIDTH / activeHeads())\n                        .attr(\"height\", BOXHEIGHT)\n                        .style(\"opacity\", function (this: any, d: any) {\n                            const headIndex = +this.parentNode.getAttribute(\"head-index\");\n                            if (config.headVis[headIndex])\n                                if (d) {\n                                    return d[index];\n                                } else {\n                                    return 0.0;\n                                }\n                            else return 0.0;\n                        });\n                });\n\n                textContainer.on(\"mouseleave\", function (this: any) {\n                    // Unhighlight selected token\n                    d3.select(this).selectAll(\".background\").style(\"opacity\", 0.0);\n\n                    // Reset visibility attributes for previously selected lines\n                    svg\n                        .select(\"#attention\")\n                        .selectAll(\"line[visibility='visible']\")\n                        .attr(\"visibility\", null);\n\n                    svg.select(\"#attention\").attr(\"visibility\", \"visible\");\n\n                    // Reset highlights superimposed over tokens\n                    svg\n                        .selectAll(\".attentionBoxes\")\n                        .selectAll(\"g\")\n                        .selectAll(\"rect\")\n                        .style(\"opacity\", 0.0);\n                });\n            }\n\n            function renderAttention(svg: any, attention: any) {\n                // Remove previous dom elements\n                svg.select(\"#attention\").remove();\n\n                // Add new elements\n                svg\n                    .append(\"g\")\n                    .attr(\"id\", \"attention\") // Container for all attention arcs\n                    .selectAll(\".headAttention\")\n                    .data(attention)\n                    .enter()\n                    .append(\"g\")\n                    .classed(\"headAttention\", true) // Group attention arcs by head\n                    .attr(\"head-index\", (d: any, i: number) => i)\n                    .selectAll(\".tokenAttention\")\n                    .data((d: any) => d)\n                    .enter()\n                    .append(\"g\")\n                    .classed(\"tokenAttention\", true) // Group attention arcs by left token\n                    .attr(\"left-token-index\", (d: any, i: number) => i)\n                    .selectAll(\"line\")\n                    .data((d: any) => d)\n                    .enter()\n                    .append(\"line\")\n                    .attr(\"x1\", BOXWIDTH)\n                    .attr(\"y1\", function (this: any) {\n                        const leftTokenIndex =\n                            +this.parentNode.getAttribute(\"left-token-index\");\n                        return TEXT_TOP + leftTokenIndex * BOXHEIGHT + BOXHEIGHT / 2;\n                    })\n                    .attr(\"x2\", BOXWIDTH + MATRIX_WIDTH)\n                    .attr(\n                        \"y2\",\n                        (d: any, rightTokenIndex: number) =>\n                            TEXT_TOP + rightTokenIndex * BOXHEIGHT + BOXHEIGHT / 2\n                    )\n                    .attr(\"stroke-width\", 2)\n                    .attr(\"stroke\", function () {\n                        // const headIndex =\n                        //   +this.parentNode.parentNode.getAttribute(\"head-index\");\n                        // return headColors(headIndex);\n                        return \"url(#svgGradient)\";\n                    })\n                    .attr(\"left-token-index\", function (this: any) {\n                        return +this.parentNode.getAttribute(\"left-token-index\");\n                    })\n                    .attr(\"right-token-index\", (d: any, i: number) => i);\n                updateAttention(svg);\n            }\n\n            function updateAttention(svg: any) {\n                svg\n                    .select(\"#attention\")\n                    .selectAll(\"line\")\n                    .attr(\"stroke-opacity\", function (this: any, d: any) {\n                        const headIndex =\n                            +this.parentNode.parentNode.getAttribute(\"head-index\");\n                        // If head is selected\n                        if (config.headVis[headIndex]) {\n                            // Set opacity to attention weight divided by number of active heads\n                            return d / activeHeads();\n                        } else {\n                            return 0.0;\n                        }\n                    });\n            }\n\n            function boxOffsets(i: number) {\n                const numHeadsAbove = config.headVis.reduce(function (acc: number, val: number, cur: number) {\n                    return val && cur < i ? acc + 1 : acc;\n                }, 0);\n                return numHeadsAbove * (BOXWIDTH / activeHeads());\n            }\n\n            function activeHeads() {\n                return config.headVis.reduce(function (acc: number, val: number) {\n                    return val ? acc + 1 : acc;\n                }, 0);\n            }\n\n            function transpose(mat: any) {\n                return mat[0].map(function (col: any, i: number) {\n                    return mat.map(function (row: any) {\n                        return row[i];\n                    });\n                });\n            };\n\n        }\n\n        const clearAttn = () => {\n            state.showAttn = false;\n            state.attnMsg = state.mode == \"single\"\n                ? \"click a point to explore its attention\"\n                : \"click a plot to zoom in\";\n            store.commit(\"setHighlightedTokenIndices\", []);\n        }\n\n        const resetAttn = () => {\n            state.hideFirst = false;\n            state.hideLast = false;\n            state.hidden[\"left\"] = [];\n            state.hidden[\"right\"] = [];\n            bertviz();\n        }\n\n        const hideTokens = (type: string) => {\n            // filter out first/cls/sep tokens\n            const tokenContainers = d3.select(\"#main-svg #right .attentionBoxes + g\");\n            let selectedToken;\n            if (type == \"first\") {\n                selectedToken = tokenContainers.selectChild(\":first-child\");\n            } else {\n                selectedToken = tokenContainers.selectChild(\":last-child\");\n            }\n            selectedToken.dispatch(\"click\");\n        }\n\n        watch(\n            () => [state.attentionByToken],\n            () => {\n                // draw attention plot\n                state.showAttn = true;\n                state.attnMsg = \"click a token to toggle lines off/on\";\n                bertviz();\n            }\n        );\n\n        watch(\n            () => [state.view, state.mode],\n            () => {\n                if (state.view != 'attn') {\n                    state.showAttn = false;\n                    state.attnMsg = state.mode == \"single\"\n                        ? \"click a point to explore its attention\"\n                        : \"click a plot to zoom in\";\n                }\n            }\n        )\n\n        return {\n            ...toRefs(state),\n            clearAttn,\n            bertviz,\n            hideTokens,\n            resetAttn\n        };\n    },\n};\n","import { render } from \"./AttnMap.vue?vue&type=template&id=5b9e856c&ts=true\"\nimport script from \"./AttnMap.vue?vue&type=script&lang=ts\"\nexport * from \"./AttnMap.vue?vue&type=script&lang=ts\"\n\nimport \"./AttnMap.vue?vue&type=style&index=0&id=5b9e856c&lang=scss\"\n\nimport exportComponent from \"/Users/catherineyeh/Documents/research/attention viz/attn-viz/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport \"bootstrap/dist/css/bootstrap.css\";\n\nimport { defineComponent } from \"vue\";\nimport { useStore } from \"@/store/index\";\n\nimport UserPanel from \"./UserPanel/UserPanel.vue\";\nimport Projection from \"./Projection/Projection.vue\";\nimport AttnMap from \"./AttnMap/AttnMap.vue\";\n\nimport { onMounted, computed, reactive, toRefs, h, watch, ref } from \"vue\";\nimport { string } from \"vue-types\";\nimport { SelectTypes } from \"ant-design-vue/es/select\";\nimport { Typing } from \"@/utils/typing\";\nimport { storeKey } from \"vuex\";\n\nexport default defineComponent({\n  name: \"App\",\n  components: { UserPanel, Projection, AttnMap },\n  setup() {\n    const store = useStore();\n\n    const projection = ref(null);\n\n    const state = reactive({\n      storeLayer: computed(() => store.state.layer),\n      storeHead: computed(() => store.state.head),\n      layernum: \"\" as string | number,\n      headnum: \"\" as string | number,\n      mode: computed(() => store.state.mode),\n\n      modelType: computed({\n        get: () => store.state.modelType,\n        set: (v) => store.dispatch(\"switchModel\", v)\n      }),\n      modelOptions: [\"bert\", \"gpt\"].map((x) => ({ value: x, label: x })),\n      projectionMethod: computed({\n        get: () => store.state.projectionMethod,\n        set: (v) => store.commit(\"setProjectionMethod\", v),\n      }),\n      projectionMethods: [\"tsne\", \"umap\", \"pca\"].map((x) => ({ value: x, label: x })),\n      colorBy: computed({\n        get: () => store.state.colorBy,\n        set: (v) => store.commit(\"setColorBy\", v),\n      }),\n      colorByOptions: [\"type\", \"position\", \"categorical\", \"punctuation\", \"norm\", \"length\"].map((x) => ({ value: x, label: x })),\n      userTheme: computed(() => store.state.userTheme)\n    });\n\n    // Init the store to read data from backend\n    onMounted(async () => {\n      await store.dispatch(\"init\");\n      const initUserTheme = getTheme() || getMediaPreference();\n      setTheme(initUserTheme);\n    });\n\n    // update graph settings based on dropdown option selected\n    const handleChange = function (type: string, value: any) {\n      if (type == \"layer\") {\n        state.layernum = value;\n      } else {\n        state.headnum = value;\n      }\n    };\n\n    // zoom to plot based on layer and head selected\n    const zoomToPlot = () => {\n      let layer = state.layernum;\n      let head = state.headnum;\n      (projection.value as any).zoomToPlot(layer, head);\n    };\n\n    const onClickReset = () => {\n      (projection.value as any).onClickReset();\n    };\n\n    const resetToMatrix = () => {\n      (projection.value as any).resetToMatrix();\n    };\n\n    // switch between light and dark mode\n    const toggleTheme = () => {\n      const activeTheme = localStorage.getItem(\"user-theme\");\n      if (activeTheme === \"light-theme\") {\n        setTheme(\"dark-theme\");\n      } else {\n        setTheme(\"light-theme\");\n      }\n    }\n\n    const getTheme = () => {\n      return localStorage.getItem(\"user-theme\");\n    }\n\n    const setTheme = (theme: string) => {\n      localStorage.setItem(\"user-theme\", theme);\n      document.documentElement.className = theme;\n      store.commit('setUserTheme', theme);\n    };\n\n    const getMediaPreference = () => {\n      const hasDarkPreference = window.matchMedia(\n        \"(prefers-color-scheme: dark)\"\n      ).matches;\n      if (hasDarkPreference) {\n        return \"dark-theme\";\n      } else {\n        return \"light-theme\";\n      }\n    };\n\n    watch([() => state.storeHead, () => state.storeLayer],\n      () => {\n        state.layernum = state.storeLayer;\n        state.headnum = state.storeHead;\n      }\n\n    );\n\n    return {\n      ...toRefs(state),\n      projection,\n      handleChange,\n      zoomToPlot,\n      onClickReset,\n      resetToMatrix,\n      toggleTheme,\n      getTheme,\n      setTheme,\n      getMediaPreference\n    };\n  },\n  computed: {\n    icon() {\n      if (this.userTheme === 'dark-theme') {\n        return ['fas', 'sun']\n      } else {\n        return ['fas', 'moon']\n      }\n    }\n  },\n});\n","import { render } from \"./App.vue?vue&type=template&id=5fe3875a&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=5fe3875a&rel=stylesheet&lang=scss\"\n\nimport exportComponent from \"/Users/catherineyeh/Documents/research/attention viz/attn-viz/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from \"vue\";\n// import { createHead } from '@vueuse/head'\n\nimport App from \"./components/App.vue\";\nimport { store, key } from '@/store/index'\n\nimport {\n    Radio, Input, Button, Select, Checkbox\n} from \"ant-design-vue\";\n\n/* import the fontawesome core */\nimport { library } from '@fortawesome/fontawesome-svg-core'\n\n/* import font awesome icon component */\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\n\n/* import specific icons */\nimport { faMoon, faSun } from '@fortawesome/free-solid-svg-icons'\n\n/* add icons to the library */\nlibrary.add(faMoon, faSun)\n\n\ncreateApp(App)\n    .use(store, key)\n    .use(Radio).use(Input).use(Button).use(Select).use(Checkbox)\n    .component('font-awesome-icon', FontAwesomeIcon)\n    .mount(\"#app\");\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Legend.vue?vue&type=style&index=0&id=e42fb72c&lang=scss\""],"sourceRoot":""}